<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">

body { font-family: courier; font-size: 12; }

.code  { font-size: 9; color: #444444; display: none; margin-left: 20px; }
.py_c_api  { color: red; }
.py_macro_api  { color: #FF7000; }
.pyx_c_api  { color: #FF3000; }
.pyx_macro_api  { color: #FF7000; }
.refnanny  { color: #FFA000; }

.error_goto  { color: #FFA000; }

.tag  {  }

.coerce  { color: #008000; border: 1px dotted #008000 }

.py_attr { color: #FF0000; font-weight: bold; }
.c_attr  { color: #0000FF; }

.py_call { color: #FF0000; font-weight: bold; }
.c_call  { color: #0000FF; }

.line { margin: 0em }

</style>
<script>
function toggleDiv(id) {
    theDiv = document.getElementById(id);
    if (theDiv.style.display == 'none') theDiv.style.display = 'block';
    else theDiv.style.display = 'none';
}
</script>
</head>
        <body>
<p>Generated by Cython 0.12.alpha0 on Sat Nov 14 09:57:21 2009
<p>Raw output: <a href="ctctable.c">ctctable.c</a>
<pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line1")'> 1: #!/usr/bin/env python</pre>
<pre id='line1' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line2")'> 2: # -*- coding: utf-8 -*-</pre>
<pre id='line2' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line3")'> 3: </pre>
<pre id='line3' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line4")'> 4: """</pre>
<pre id='line4' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line5")'> 5: TODO</pre>
<pre id='line5' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line6")'> 6: =====</pre>
<pre id='line6' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line7")'> 7: * docstrings.</pre>
<pre id='line7' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line8")'> 8: * fix contains()</pre>
<pre id='line8' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line9")'> 9: * allow specifying which columns are ints/floats.</pre>
<pre id='line9' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line10")'> 10: * DONE: indexes tctdbsetindex</pre>
<pre id='line10' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line11")'> 11: * DONE: document between</pre>
<pre id='line11' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line12")'> 12: * DONE: tune/optimize.</pre>
<pre id='line12' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line13")'> 13: * DONE: document tuning params.</pre>
<pre id='line13' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line14")'> 14: * DONE: __iter__ tctdbiternext (needs docs)</pre>
<pre id='line14' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line15")'> 15: * faster methods that assume no \0's in the strings?</pre>
<pre id='line15' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line16")'> 16: * tctdbmetasearch</pre>
<pre id='line16' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line17")'> 17: * see: tctdbqryproc for callbacks on queries.</pre>
<pre id='line17' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line18")'> 18: * benchmark.</pre>
<pre id='line18' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line19")'> 19: """</pre>
<pre id='line19' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line20")'> 20: </pre>
<pre id='line20' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line21")'> 21: cimport python_string as ps</pre>
<pre id='line21' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line22")'> 22: cimport python_list as pl</pre>
<pre id='line22' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line23")'> 23: </pre>
<pre id='line23' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line24")'> 24: DEF DEFAULT_OPTS = 0</pre>
<pre id='line24' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line25")'> 25: TDBTLARGE = 1</pre>
<pre id='line25' class='code' style='background-color: #FFFFaa'>
    if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_m, __pyx_n_s__TDBTLARGE, __pyx_int_1) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 25; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line26")'> 26: TDBTDEFLATE = 1 &lt;&lt; 1</pre>
<pre id='line26' class='code' style='background-color: #FFFFaa'>
    if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_m, __pyx_n_s__TDBTDEFLATE, __pyx_int_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 26; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line27")'> 27: TDBTBZIP = 1 &lt;&lt; 2</pre>
<pre id='line27' class='code' style='background-color: #FFFFaa'>
    if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_m, __pyx_n_s__TDBTBZIP, __pyx_int_4) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 27; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line28")'> 28: TDBTTCBS = 1 &lt;&lt; 3</pre>
<pre id='line28' class='code' style='background-color: #FFFFaa'>
    if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_m, __pyx_n_s__TDBTTCBS, __pyx_int_8) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 28; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line29")'> 29: TDBTEXCODEC = 1 &lt;&lt; 4</pre>
<pre id='line29' class='code' style='background-color: #FFFFaa'>
    if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_m, __pyx_n_s__TDBTEXCODEC, __pyx_int_16) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 29; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line30")'> 30: </pre>
<pre id='line30' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line31")'> 31: </pre>
<pre id='line31' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line32")'> 32: tokyo_cabinet_version = c_tcversion</pre>
<pre id='line32' class='code' style='background-color: #FFFF79'>
    __pyx_t_1 = __Pyx_<span class='py_c_api'>PyBytes_FromString</span>(tcversion);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 32; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_m, __pyx_n_s_18, __pyx_t_1) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 32; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line33")'> 33: __version__ = '0.1.1'</pre>
<pre id='line33' class='code' style='background-color: #FFFFaa'>
    if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_m, __pyx_n_s____version__, ((PyObject *)__pyx_kp_s_19)) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 33; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line34")'> 34: </pre>
<pre id='line34' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF44' onclick='toggleDiv("line35")'> 35: class TCException(Exception):</pre>
<pre id='line35' class='code' style='background-color: #FFFF44'>
    __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 35; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 35; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_builtin_Exception);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_builtin_Exception);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_builtin_Exception);
  if (<span class='py_c_api'>PyDict_SetItemString</span>(((PyObject *)__pyx_t_1), "__doc__", ((PyObject *)__pyx_kp_s_20)) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 35; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_CreateClass</span>(__pyx_t_2, ((PyObject *)__pyx_t_1), __pyx_n_s__TCException, "ctctable");<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 35; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_m, __pyx_n_s__TCException, __pyx_t_3) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 35; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_1)); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line36")'> 36:     '''An error communicating with the Tokyo Cabinet database.'''</pre>
<pre id='line36' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line37")'> 37: </pre>
<pre id='line37' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line38")'> 38: cdef class TCTable(object):</pre>
<pre id='line38' class='code' style='background-color: #FFFFff'>
struct __pyx_obj_8ctctable_TCTable {
  PyObject_HEAD
  struct __pyx_vtabstruct_8ctctable_TCTable *__pyx_vtab;
  TCTDB *_state;
  PyObject *path;
  PyObject *mode;
};

struct __pyx_vtabstruct_8ctctable_TCTable {
  PyObject *(*_msg)(struct __pyx_obj_8ctctable_TCTable *, int __pyx_skip_dispatch);
  TCMAP *(*_dict_to_tcmap)(struct __pyx_obj_8ctctable_TCTable *, PyObject *);
  int (*create_index)(struct __pyx_obj_8ctctable_TCTable *, char *, PyObject *, int __pyx_skip_dispatch);
  PyObject *(*_tcmap_to_dict)(struct __pyx_obj_8ctctable_TCTable *, TCMAP *);
  PyObject *(*_key_to_dict)(struct __pyx_obj_8ctctable_TCTable *, PyObject *);
  PyObject *(*_ckey_to_dict)(struct __pyx_obj_8ctctable_TCTable *, char *, int);
  PyObject *(*get)(struct __pyx_obj_8ctctable_TCTable *, PyObject *, int __pyx_skip_dispatch, struct __pyx_opt_args_8ctctable_7TCTable_get *__pyx_optional_args);
  int (*size_of)(struct __pyx_obj_8ctctable_TCTable *, PyObject *, int __pyx_skip_dispatch);
  void (*_set_limit)(struct __pyx_obj_8ctctable_TCTable *, TDBQRY *, PyObject *);
  void (*_set_order)(struct __pyx_obj_8ctctable_TCTable *, TDBQRY *, PyObject *);
  PyObject *(*_tclist_to_list)(struct __pyx_obj_8ctctable_TCTable *, TCLIST *, int, int);
};
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line39")'> 39:     """A Tokyo Cabinet table database.</pre>
<pre id='line39' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line40")'> 40: </pre>
<pre id='line40' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line41")'> 41:     `path` is the path to the database file to be opened.</pre>
<pre id='line41' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line42")'> 42:     `mode` either 'w' for write or 'r' for read.</pre>
<pre id='line42' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line43")'> 43:     """</pre>
<pre id='line43' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line44")'> 44:     cdef TCTDB* _state</pre>
<pre id='line44' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line45")'> 45:     cdef readonly object path</pre>
<pre id='line45' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line46")'> 46:     cdef readonly object mode</pre>
<pre id='line46' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line47")'> 47: </pre>
<pre id='line47' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line48")'> 48:     def __repr__(self):</pre>
<pre id='line48' class='code' style='background-color: #FFFFd4'>
static PyObject *__pyx_pf_8ctctable_7TCTable___repr__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable___repr__(PyObject *__pyx_v_self) {
  PyObject *__pyx_v_c;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__repr__");
  __pyx_v_c = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFF73' onclick='toggleDiv("line49")'> 49:         c = self.__class__.__name__</pre>
<pre id='line49' class='code' style='background-color: #FFFF73'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s____class__);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 49; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_t_1, __pyx_n_s____name__);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 49; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_c);
  __pyx_v_c = __pyx_t_2;
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF4d' onclick='toggleDiv("line50")'> 50:         return "%s('%s')" % (c, self.path)</pre>
<pre id='line50' class='code' style='background-color: #FFFF4d'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 50; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_c);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_v_c);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_c);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, ((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Remainder</span>(((PyObject *)__pyx_kp_s_1), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 50; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.__repr__");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_c);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line51")'> 51: </pre>
<pre id='line51' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF4b' onclick='toggleDiv("line52")'> 52:     def _throw(self, message='Error.'):</pre>
<pre id='line52' class='code' style='background-color: #FFFF4b'>
static PyObject *__pyx_pf_8ctctable_7TCTable__throw(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8ctctable_7TCTable__throw[] = "Raises a TCException, appending to *message* the last error message\n        from the table database.\n        ";
static PyObject *__pyx_pf_8ctctable_7TCTable__throw(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_message = 0;
  PyObject *__pyx_r = NULL;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__message,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_throw");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[1] = {0};
    values[0] = ((PyObject *)__pyx_kp_s_2);
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__message);
        if (unlikely(value)) { values[0] = value; kw_args--; }
      }
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "_throw") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 52; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    __pyx_v_message = values[0];
  } else {
    __pyx_v_message = ((PyObject *)__pyx_kp_s_2);
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  1: __pyx_v_message = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("_throw", 0, 0, 1, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 52; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable._throw");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line53")'> 53:         '''Raises a TCException, appending to *message* the last error message</pre>
<pre id='line53' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line54")'> 54:         from the table database.</pre>
<pre id='line54' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line55")'> 55:         '''</pre>
<pre id='line55' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF3e' onclick='toggleDiv("line56")'> 56:         raise TCException(message + self._msg())</pre>
<pre id='line56' class='code' style='background-color: #FFFF3e'>
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetName</span>(__pyx_m, __pyx_n_s__TCException);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 56; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_msg(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), 0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 56; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_t_3 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_v_message, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 56; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 56; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_3);
  __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_1, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 56; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_3, 0, 0);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
 <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 56; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable._throw");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line57")'> 57: </pre>
<pre id='line57' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF52' onclick='toggleDiv("line58")'> 58:     cpdef _msg(TCTable self):</pre>
<pre id='line58' class='code' style='background-color: #FFFF52'>
static PyObject *__pyx_pf_8ctctable_7TCTable__msg(PyObject *__pyx_v_self, PyObject *unused); static PyObject *__pyx_pf_8ctctable_7TCTable__msg(PyObject *__pyx_v_self, PyObject *unused); /*proto*/
static char __pyx_doc_8ctctable_7TCTable__msg[] = "Composes an error message for an exception, appending to the value\n        of *message* the last error message from the table database.\n        ";
static PyObject *__pyx_pf_8ctctable_7TCTable__msg(PyObject *__pyx_v_self, PyObject *unused) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_msg");
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_msg(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 58; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable._msg");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line59")'> 59:         '''Composes an error message for an exception, appending to the value</pre>
<pre id='line59' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line60")'> 60:         of *message* the last error message from the table database.</pre>
<pre id='line60' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line61")'> 61:         '''</pre>
<pre id='line61' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line62")'> 62:         cdef int errorcode = tctdbecode(self._state)</pre>
<pre id='line62' class='code' style='background-color: #FFFFff'>
    __pyx_v_errorcode = tctdbecode(__pyx_v_self->_state);
</pre><pre class='line' style='background-color: #FFFF73' onclick='toggleDiv("line63")'> 63:         return tctdberrmsg(errorcode)</pre>
<pre id='line63' class='code' style='background-color: #FFFF73'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __Pyx_<span class='py_c_api'>PyBytes_FromString</span>(tctdberrmsg(__pyx_v_errorcode));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 63; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable._msg");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line64")'> 64: </pre>
<pre id='line64' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line65")'> 65: </pre>
<pre id='line65' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF1a' onclick='toggleDiv("line66")'> 66:     def optimize(self, int64_t bnum=-1, int8_t apow=-1, int8_t fpow=-1,</pre>
<pre id='line66' class='code' style='background-color: #FFFF1a'>
static PyObject *__pyx_pf_8ctctable_7TCTable_optimize(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable_optimize(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int64_t __pyx_v_bnum;
  int8_t __pyx_v_apow;
  int8_t __pyx_v_fpow;
  uint8_t __pyx_v_opts;
  int __pyx_v_success;
  PyObject *__pyx_r = NULL;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__bnum,&__pyx_n_s__apow,&__pyx_n_s__fpow,&__pyx_n_s__opts,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("optimize");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[4] = {0,0,0,0};
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
      case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__bnum);
        if (unlikely(value)) { values[0] = value; kw_args--; }
      }
      case  1:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__apow);
        if (unlikely(value)) { values[1] = value; kw_args--; }
      }
      case  2:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__fpow);
        if (unlikely(value)) { values[2] = value; kw_args--; }
      }
      case  3:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__opts);
        if (unlikely(value)) { values[3] = value; kw_args--; }
      }
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "optimize") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 66; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    if (values[0]) {
      __pyx_v_bnum = __Pyx_PyInt_from_py_int64_t(values[0]);<span class='error_goto'> if (unlikely((__pyx_v_bnum == (int64_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 66; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_bnum = ((int64_t)-1);
    }
    if (values[1]) {
      __pyx_v_apow = __Pyx_PyInt_from_py_int8_t(values[1]);<span class='error_goto'> if (unlikely((__pyx_v_apow == (int8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 66; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_apow = ((int8_t)-1);
    }
    if (values[2]) {
      __pyx_v_fpow = __Pyx_PyInt_from_py_int8_t(values[2]);<span class='error_goto'> if (unlikely((__pyx_v_fpow == (int8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 66; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_fpow = ((int8_t)-1);
    }
    if (values[3]) {
      __pyx_v_opts = __Pyx_PyInt_from_py_uint8_t(values[3]);<span class='error_goto'> if (unlikely((__pyx_v_opts == (uint8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 67; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_opts = ((uint8_t)0);
    }
  } else {
    __pyx_v_bnum = ((int64_t)-1);
    __pyx_v_apow = ((int8_t)-1);
    __pyx_v_fpow = ((int8_t)-1);
    __pyx_v_opts = ((uint8_t)0);
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  4: __pyx_v_opts = __Pyx_PyInt_from_py_uint8_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3));<span class='error_goto'> if (unlikely((__pyx_v_opts == (uint8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 67; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  3: __pyx_v_fpow = __Pyx_PyInt_from_py_int8_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2));<span class='error_goto'> if (unlikely((__pyx_v_fpow == (int8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 66; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  2: __pyx_v_apow = __Pyx_PyInt_from_py_int8_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1));<span class='error_goto'> if (unlikely((__pyx_v_apow == (int8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 66; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  1: __pyx_v_bnum = __Pyx_PyInt_from_py_int64_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0));<span class='error_goto'> if (unlikely((__pyx_v_bnum == (int64_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 66; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("optimize", 0, 0, 4, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 66; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.optimize");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line67")'> 67:                  uint8_t opts=DEFAULT_OPTS):</pre>
<pre id='line67' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line68")'> 68:         if self.mode != 'w':</pre>
<pre id='line68' class='code' style='background-color: #FFFF79'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->mode, ((PyObject *)__pyx_n_s__w), Py_NE);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(__pyx_t_2 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFF57' onclick='toggleDiv("line69")'> 69:             raise TCException('Unable optimize unless open with mode="w"')</pre>
<pre id='line69' class='code' style='background-color: #FFFF57'>
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetName</span>(__pyx_m, __pyx_n_s__TCException);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_kp_s_3));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, ((PyObject *)__pyx_kp_s_3));
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_kp_s_3));
    __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_1, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_4, 0, 0);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
   <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    goto __pyx_L6;
  }
  __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line70")'> 70: </pre>
<pre id='line70' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line71")'> 71:         cdef bint success = tctdboptimize(self._state, bnum, apow, fpow, opts)</pre>
<pre id='line71' class='code' style='background-color: #FFFFff'>
    __pyx_v_success = tctdboptimize(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state, __pyx_v_bnum, __pyx_v_apow, __pyx_v_fpow, __pyx_v_opts);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line72")'> 72:         if not success:</pre>
<pre id='line72' class='code' style='background-color: #FFFFff'>
    __pyx_t_2 = (!__pyx_v_success);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFF2a' onclick='toggleDiv("line73")'> 73:             self._throw('Unable to optimize {0}.'.format(str(self.path)))</pre>
<pre id='line73' class='code' style='background-color: #FFFF2a'>
        __pyx_t_4 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s___throw);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 73; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    __pyx_t_3 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_4), __pyx_n_s__format);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 73; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 73; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
    __pyx_t_5 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 73; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 73; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_5);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_3, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 73; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 73; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_5);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_5 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_4, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 73; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L7;
  }
  __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFF66' onclick='toggleDiv("line74")'> 74:         return success</pre>
<pre id='line74' class='code' style='background-color: #FFFF66'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_5 = __Pyx_<span class='py_c_api'>PyBool_FromLong</span>(__pyx_v_success);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 74; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
  __pyx_r = __pyx_t_5;
  __pyx_t_5 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.optimize");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line75")'> 75: </pre>
<pre id='line75' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line76")'> 76: </pre>
<pre id='line76' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF0e' onclick='toggleDiv("line77")'> 77:     def __cinit__(self, path, mode='r',</pre>
<pre id='line77' class='code' style='background-color: #FFFF0e'>
static int __pyx_pf_8ctctable_7TCTable___cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8ctctable_7TCTable___cinit__[] = "\n        'bnum' specifies the number of elements of the bucket array. If it is not more than 0, the default value is specified. The default value is 131071. Suggested size of the bucket array is about from 0.5 to 4 times of the number of all records to be stored.\n        'apow' specifies the size of record alignment by power of 2. If it is negative, the default value is specified. The default value is 4 standing for 2^4=16.\n        'fpow' specifies the maximum number of elements of the free block pool by power of 2. If it is negative, the default value is specified. The default value is 10 standing for 2^10=1024.\n        'opts' specifies options by bitwise-or: `TDBTLARGE' specifies that the size of the database can be larger than 2GB by using 64-bit bucket array, `TDBTDEFLATE' specifies that each record is compressed with Deflate encoding, `TDBTBZIP' specifies that each record is compressed with BZIP2 encoding, `TDBTTCBS' specifies that each record is compressed with TCBS encoding.\n        'mmap_size' is the size of mapped memory. default is 67,108,864 (64MB)\n        'rcnum' is the max number of records to be cached. default is 0\n        'lcnum' is the max number of leaf-nodes to be cached. default is 4096\n        'ncnum' is the max number of non-leaf nodes cached. default is 512\n        ";
static int __pyx_pf_8ctctable_7TCTable___cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_path = 0;
  PyObject *__pyx_v_mode = 0;
  int64_t __pyx_v_bnum;
  int8_t __pyx_v_apow;
  int8_t __pyx_v_fpow;
  uint8_t __pyx_v_opts;
  int64_t __pyx_v_mmap_size;
  int32_t __pyx_v_rcnum;
  int32_t __pyx_v_lcnum;
  int32_t __pyx_v_ncnum;
  int __pyx_v_success;
  int __pyx_r;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__path,&__pyx_n_s__mode,&__pyx_n_s__bnum,&__pyx_n_s__apow,&__pyx_n_s__fpow,&__pyx_n_s__opts,&__pyx_n_s__mmap_size,&__pyx_n_s__rcnum,&__pyx_n_s__lcnum,&__pyx_n_s__ncnum,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__cinit__");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[10] = {0,0,0,0,0,0,0,0,0,0};
    values[1] = ((PyObject *)__pyx_n_s__r);
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case 10: values[9] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 9);
      case  9: values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
      case  8: values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
      case  7: values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
      case  6: values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
      case  5: values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
      case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
      case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__path);
      if (likely(values[0])) kw_args--;
      else goto __pyx_L5_argtuple_error;
      case  1:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__mode);
        if (unlikely(value)) { values[1] = value; kw_args--; }
      }
      case  2:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__bnum);
        if (unlikely(value)) { values[2] = value; kw_args--; }
      }
      case  3:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__apow);
        if (unlikely(value)) { values[3] = value; kw_args--; }
      }
      case  4:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__fpow);
        if (unlikely(value)) { values[4] = value; kw_args--; }
      }
      case  5:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__opts);
        if (unlikely(value)) { values[5] = value; kw_args--; }
      }
      case  6:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__mmap_size);
        if (unlikely(value)) { values[6] = value; kw_args--; }
      }
      case  7:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__rcnum);
        if (unlikely(value)) { values[7] = value; kw_args--; }
      }
      case  8:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__lcnum);
        if (unlikely(value)) { values[8] = value; kw_args--; }
      }
      case  9:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__ncnum);
        if (unlikely(value)) { values[9] = value; kw_args--; }
      }
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "__cinit__") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 77; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    __pyx_v_path = values[0];
    __pyx_v_mode = values[1];
    if (values[2]) {
      __pyx_v_bnum = __Pyx_PyInt_from_py_int64_t(values[2]);<span class='error_goto'> if (unlikely((__pyx_v_bnum == (int64_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 79; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_bnum = ((int64_t)-1);
    }
    if (values[3]) {
      __pyx_v_apow = __Pyx_PyInt_from_py_int8_t(values[3]);<span class='error_goto'> if (unlikely((__pyx_v_apow == (int8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 79; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_apow = ((int8_t)-1);
    }
    if (values[4]) {
      __pyx_v_fpow = __Pyx_PyInt_from_py_int8_t(values[4]);<span class='error_goto'> if (unlikely((__pyx_v_fpow == (int8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 80; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_fpow = ((int8_t)-1);
    }
    if (values[5]) {
      __pyx_v_opts = __Pyx_PyInt_from_py_uint8_t(values[5]);<span class='error_goto'> if (unlikely((__pyx_v_opts == (uint8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 80; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_opts = ((uint8_t)0);
    }
    if (values[6]) {
      __pyx_v_mmap_size = __Pyx_PyInt_from_py_int64_t(values[6]);<span class='error_goto'> if (unlikely((__pyx_v_mmap_size == (int64_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 82; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_mmap_size = ((int64_t)-1);
    }
    if (values[7]) {
      __pyx_v_rcnum = __Pyx_PyInt_from_py_int32_t(values[7]);<span class='error_goto'> if (unlikely((__pyx_v_rcnum == (int32_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 84; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_rcnum = ((int32_t)-1);
    }
    if (values[8]) {
      __pyx_v_lcnum = __Pyx_PyInt_from_py_int32_t(values[8]);<span class='error_goto'> if (unlikely((__pyx_v_lcnum == (int32_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 84; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_lcnum = ((int32_t)-1);
    }
    if (values[9]) {
      __pyx_v_ncnum = __Pyx_PyInt_from_py_int32_t(values[9]);<span class='error_goto'> if (unlikely((__pyx_v_ncnum == (int32_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 84; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_ncnum = ((int32_t)-1);
    }
  } else {
    __pyx_v_mode = ((PyObject *)__pyx_n_s__r);
    __pyx_v_bnum = ((int64_t)-1);
    __pyx_v_apow = ((int8_t)-1);
    __pyx_v_fpow = ((int8_t)-1);
    __pyx_v_opts = ((uint8_t)0);
    __pyx_v_mmap_size = ((int64_t)-1);
    __pyx_v_rcnum = ((int32_t)-1);
    __pyx_v_lcnum = ((int32_t)-1);
    __pyx_v_ncnum = ((int32_t)-1);
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case 10: __pyx_v_ncnum = __Pyx_PyInt_from_py_int32_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 9));<span class='error_goto'> if (unlikely((__pyx_v_ncnum == (int32_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 84; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  9: __pyx_v_lcnum = __Pyx_PyInt_from_py_int32_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8));<span class='error_goto'> if (unlikely((__pyx_v_lcnum == (int32_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 84; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  8: __pyx_v_rcnum = __Pyx_PyInt_from_py_int32_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7));<span class='error_goto'> if (unlikely((__pyx_v_rcnum == (int32_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 84; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  7: __pyx_v_mmap_size = __Pyx_PyInt_from_py_int64_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6));<span class='error_goto'> if (unlikely((__pyx_v_mmap_size == (int64_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 82; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  6: __pyx_v_opts = __Pyx_PyInt_from_py_uint8_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5));<span class='error_goto'> if (unlikely((__pyx_v_opts == (uint8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 80; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  5: __pyx_v_fpow = __Pyx_PyInt_from_py_int8_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4));<span class='error_goto'> if (unlikely((__pyx_v_fpow == (int8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 80; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  4: __pyx_v_apow = __Pyx_PyInt_from_py_int8_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3));<span class='error_goto'> if (unlikely((__pyx_v_apow == (int8_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 79; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  3: __pyx_v_bnum = __Pyx_PyInt_from_py_int64_t(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2));<span class='error_goto'> if (unlikely((__pyx_v_bnum == (int64_t)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 79; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      case  2: __pyx_v_mode = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: __pyx_v_path = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      break;
      default: goto __pyx_L5_argtuple_error;
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 0, 1, 10, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 77; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.__cinit__");
  return -1;
  __pyx_L4_argument_unpacking_done:;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_path);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_mode);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line78")'> 78:                  # tune params.</pre>
<pre id='line78' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line79")'> 79:                  int64_t bnum=-1, int8_t apow=-1,</pre>
<pre id='line79' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line80")'> 80:                  int8_t fpow=-1, uint8_t opts=DEFAULT_OPTS,</pre>
<pre id='line80' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line81")'> 81:                  #mmap (setxmsiz params</pre>
<pre id='line81' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line82")'> 82:                  int64_t mmap_size=-1,</pre>
<pre id='line82' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line83")'> 83:                  # cache params:</pre>
<pre id='line83' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line84")'> 84:                  int32_t rcnum=-1, int32_t lcnum=-1, int32_t ncnum=-1):</pre>
<pre id='line84' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line85")'> 85:         """</pre>
<pre id='line85' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line86")'> 86:         'bnum' specifies the number of elements of the bucket array. If it is not more than 0, the default value is specified. The default value is 131071. Suggested size of the bucket array is about from 0.5 to 4 times of the number of all records to be stored.</pre>
<pre id='line86' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line87")'> 87:         'apow' specifies the size of record alignment by power of 2. If it is negative, the default value is specified. The default value is 4 standing for 2^4=16.</pre>
<pre id='line87' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line88")'> 88:         'fpow' specifies the maximum number of elements of the free block pool by power of 2. If it is negative, the default value is specified. The default value is 10 standing for 2^10=1024.</pre>
<pre id='line88' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line89")'> 89:         'opts' specifies options by bitwise-or: `TDBTLARGE' specifies that the size of the database can be larger than 2GB by using 64-bit bucket array, `TDBTDEFLATE' specifies that each record is compressed with Deflate encoding, `TDBTBZIP' specifies that each record is compressed with BZIP2 encoding, `TDBTTCBS' specifies that each record is compressed with TCBS encoding.</pre>
<pre id='line89' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line90")'> 90:         'mmap_size' is the size of mapped memory. default is 67,108,864 (64MB)</pre>
<pre id='line90' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line91")'> 91:         'rcnum' is the max number of records to be cached. default is 0</pre>
<pre id='line91' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line92")'> 92:         'lcnum' is the max number of leaf-nodes to be cached. default is 4096</pre>
<pre id='line92' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line93")'> 93:         'ncnum' is the max number of non-leaf nodes cached. default is 512</pre>
<pre id='line93' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line94")'> 94:         """</pre>
<pre id='line94' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line95")'> 95:         self.path = path</pre>
<pre id='line95' class='code' style='background-color: #FFFFd4'>
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_path);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_path);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
  ((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path = __pyx_v_path;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line96")'> 96:         self.mode = mode</pre>
<pre id='line96' class='code' style='background-color: #FFFFd4'>
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_mode);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_mode);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->mode);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->mode);
  ((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->mode = __pyx_v_mode;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line97")'> 97:         cdef bint success</pre>
<pre id='line97' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line98")'> 98:         self._state = tctdbnew()</pre>
<pre id='line98' class='code' style='background-color: #FFFFff'>
    ((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state = tctdbnew();
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line99")'> 99:         if bnum != -1 or apow != -1 or fpow != -1 or opts != DEFAULT_OPTS:</pre>
<pre id='line99' class='code' style='background-color: #FFFFff'>
    __pyx_t_1 = (__pyx_v_bnum != -1);
  if (!__pyx_t_1) {
    __pyx_t_2 = (__pyx_v_apow != -1);
    if (!__pyx_t_2) {
      __pyx_t_3 = (__pyx_v_fpow != -1);
      if (!__pyx_t_3) {
        __pyx_t_4 = (__pyx_v_opts != 0);
        __pyx_t_5 = __pyx_t_4;
      } else {
        __pyx_t_5 = __pyx_t_3;
      }
      __pyx_t_3 = __pyx_t_5;
    } else {
      __pyx_t_3 = __pyx_t_2;
    }
    __pyx_t_2 = __pyx_t_3;
  } else {
    __pyx_t_2 = __pyx_t_1;
  }
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line100")'> 100:             success = tctdbtune(self._state, bnum, apow, fpow, opts)</pre>
<pre id='line100' class='code' style='background-color: #FFFFff'>
        __pyx_v_success = tctdbtune(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state, __pyx_v_bnum, __pyx_v_apow, __pyx_v_fpow, __pyx_v_opts);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line101")'> 101:             if not success:</pre>
<pre id='line101' class='code' style='background-color: #FFFFff'>
        __pyx_t_2 = (!__pyx_v_success);
    if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFF2a' onclick='toggleDiv("line102")'> 102:                 self._throw('Unable to tune {0}.'.format(str(path)))</pre>
<pre id='line102' class='code' style='background-color: #FFFF2a'>
            __pyx_t_6 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s___throw);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 102; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      __pyx_t_7 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_5), __pyx_n_s__format);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 102; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
      __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 102; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_path);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_v_path);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_path);
      __pyx_t_9 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 102; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 102; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_9);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_9);
      __pyx_t_9 = 0;
      __pyx_t_9 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_7, __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 102; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 102; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_9);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_9);
      __pyx_t_9 = 0;
      __pyx_t_9 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_6, __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 102; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      goto __pyx_L7;
    }
    __pyx_L7:;
    goto __pyx_L6;
  }
  __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line103")'> 103:         if mmap_size != -1:</pre>
<pre id='line103' class='code' style='background-color: #FFFFff'>
    __pyx_t_2 = (__pyx_v_mmap_size != -1);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line104")'> 104:             success = tctdbsetxmsiz(self._state, mmap_size)</pre>
<pre id='line104' class='code' style='background-color: #FFFFff'>
        __pyx_v_success = tctdbsetxmsiz(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state, __pyx_v_mmap_size);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line105")'> 105:             if not success:</pre>
<pre id='line105' class='code' style='background-color: #FFFFff'>
        __pyx_t_2 = (!__pyx_v_success);
    if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFF35' onclick='toggleDiv("line106")'> 106:                 self._throw('Unable to set mmap size {0}.'.format(path))</pre>
<pre id='line106' class='code' style='background-color: #FFFF35'>
            __pyx_t_9 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s___throw);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 106; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
      __pyx_t_8 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_6), __pyx_n_s__format);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 106; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
      __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 106; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_path);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_v_path);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_path);
      __pyx_t_7 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_8, __pyx_t_6, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 106; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 106; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_7);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_7);
      __pyx_t_7 = 0;
      __pyx_t_7 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_9, __pyx_t_6, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 106; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      goto __pyx_L9;
    }
    __pyx_L9:;
    goto __pyx_L8;
  }
  __pyx_L8:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line107")'> 107:         if rcnum &gt; -1 or lcnum &gt; -1 or ncnum &gt; -1:</pre>
<pre id='line107' class='code' style='background-color: #FFFFff'>
    __pyx_t_2 = (__pyx_v_rcnum > -1);
  if (!__pyx_t_2) {
    __pyx_t_1 = (__pyx_v_lcnum > -1);
    if (!__pyx_t_1) {
      __pyx_t_3 = (__pyx_v_ncnum > -1);
      __pyx_t_5 = __pyx_t_3;
    } else {
      __pyx_t_5 = __pyx_t_1;
    }
    __pyx_t_1 = __pyx_t_5;
  } else {
    __pyx_t_1 = __pyx_t_2;
  }
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line108")'> 108:             success = tctdbsetcache(self._state, rcnum, lcnum, ncnum)</pre>
<pre id='line108' class='code' style='background-color: #FFFFff'>
        __pyx_v_success = tctdbsetcache(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state, __pyx_v_rcnum, __pyx_v_lcnum, __pyx_v_ncnum);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line109")'> 109:             if not success:</pre>
<pre id='line109' class='code' style='background-color: #FFFFff'>
        __pyx_t_1 = (!__pyx_v_success);
    if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFF35' onclick='toggleDiv("line110")'> 110:                 self._throw('Unable to setcache {0}.'.format(self.path))</pre>
<pre id='line110' class='code' style='background-color: #FFFF35'>
            __pyx_t_7 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s___throw);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 110; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
      __pyx_t_6 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_7), __pyx_n_s__format);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 110; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 110; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, ((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->path);
      __pyx_t_8 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_6, __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 110; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 110; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_8);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_8);
      __pyx_t_8 = 0;
      __pyx_t_8 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_7, __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 110; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      goto __pyx_L11;
    }
    __pyx_L11:;
    goto __pyx_L10;
  }
  __pyx_L10:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line111")'> 111: </pre>
<pre id='line111' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF52' onclick='toggleDiv("line112")'> 112:         success = tctdbopen(self._state, path, 6 if mode=='w' else 1)</pre>
<pre id='line112' class='code' style='background-color: #FFFF52'>
    __pyx_t_10 = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(__pyx_v_path);<span class='error_goto'> if (unlikely((!__pyx_t_10) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_8 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_mode, ((PyObject *)__pyx_n_s__w), Py_EQ);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
  __pyx_t_1 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_8);<span class='error_goto'> if (unlikely(__pyx_t_1 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  if (__pyx_t_1) {
    __pyx_t_11 = 6;
  } else {
    __pyx_t_11 = 1;
  }
  __pyx_v_success = tctdbopen(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state, __pyx_t_10, __pyx_t_11);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line113")'> 113:         if not success:</pre>
<pre id='line113' class='code' style='background-color: #FFFFff'>
    __pyx_t_1 = (!__pyx_v_success);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFF24' onclick='toggleDiv("line114")'> 114:             self._throw('Unable to open {0} for {1}.'.format(str(path)))</pre>
<pre id='line114' class='code' style='background-color: #FFFF24'>
        __pyx_t_8 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s___throw);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 114; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
    __pyx_t_9 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_8), __pyx_n_s__format);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 114; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 114; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_path);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_v_path);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_path);
    __pyx_t_6 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 114; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 114; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_6);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_6);
    __pyx_t_6 = 0;
    __pyx_t_6 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_9, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 114; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 114; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_6);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_6);
    __pyx_t_6 = 0;
    __pyx_t_6 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_8, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 114; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    goto __pyx_L12;
  }
  __pyx_L12:;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.__cinit__");
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_path);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_mode);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line115")'> 115: </pre>
<pre id='line115' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line116")'> 116:     def close(self):</pre>
<pre id='line116' class='code' style='background-color: #FFFFd4'>
static PyObject *__pyx_pf_8ctctable_7TCTable_close(PyObject *__pyx_v_self, PyObject *unused); /*proto*/
static char __pyx_doc_8ctctable_7TCTable_close[] = "Closes the database file and cleans memory, rendering this\n        object useless.\n        ";
static PyObject *__pyx_pf_8ctctable_7TCTable_close(PyObject *__pyx_v_self, PyObject *unused) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("close");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line117")'> 117:         '''Closes the database file and cleans memory, rendering this</pre>
<pre id='line117' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line118")'> 118:         object useless.</pre>
<pre id='line118' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line119")'> 119:         '''</pre>
<pre id='line119' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line120")'> 120:         if not self._state == NULL:</pre>
<pre id='line120' class='code' style='background-color: #FFFFff'>
    __pyx_t_1 = (!(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state == NULL));
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line121")'> 121:             tctdbdel(self._state)</pre>
<pre id='line121' class='code' style='background-color: #FFFFff'>
        tctdbdel(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state);
</pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line122")'> 122:             self._state = NULL</pre>
<pre id='line122' class='code' style='background-color: #FFFFc4'>
        ((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state = NULL;
    goto __pyx_L5;
  }
  __pyx_L5:;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line123")'> 123: </pre>
<pre id='line123' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line124")'> 124:     cdef TCMAP* _dict_to_tcmap(self, dict d):</pre>
<pre id='line124' class='code' style='background-color: #FFFFaa'>
static  TCMAP *__pyx_f_8ctctable_7TCTable__dict_to_tcmap(struct __pyx_obj_8ctctable_TCTable *__pyx_v_self, PyObject *__pyx_v_d) {
  char *__pyx_v_kbuf;
  char *__pyx_v_vbuf;
  Py_ssize_t __pyx_v_ksiz;
  Py_ssize_t __pyx_v_vsiz;
  TCMAP *__pyx_v_tcmap;
  int __pyx_v_ld;
  PyObject *__pyx_v_li = 0;
  PyObject *__pyx_v_key;
  PyObject *__pyx_v_val;
  TCMAP *__pyx_r;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_dict_to_tcmap");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_d);
  __pyx_v_key = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_v_val = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line125")'> 125:         """INTERNAL: take a dict and return the tcmap which must</pre>
<pre id='line125' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line126")'> 126:         be deleted with tcmapdel(tcmap)</pre>
<pre id='line126' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line127")'> 127:         """</pre>
<pre id='line127' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line128")'> 128:         cdef char *kbuf, *vbuf</pre>
<pre id='line128' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line129")'> 129:         cdef Py_ssize_t ksiz, vsiz</pre>
<pre id='line129' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line130")'> 130:         cdef TCMAP *tcmap</pre>
<pre id='line130' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line131")'> 131:         cdef int ld = len(d)</pre>
<pre id='line131' class='code' style='background-color: #FFFFaa'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_Length</span>(((PyObject *)__pyx_v_d));<span class='error_goto'> if (unlikely(__pyx_t_1 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 131; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_v_ld = __pyx_t_1;
</pre><pre class='line' style='background-color: #FFFF66' onclick='toggleDiv("line132")'> 132:         cdef list li = d.items()</pre>
<pre id='line132' class='code' style='background-color: #FFFF66'>
    __pyx_t_2 = <span class='py_c_api'>PyDict_Items</span>(((PyObject *)__pyx_v_d));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 132; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (!(likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_2))||((__pyx_t_2) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected list, got %.200s", Py_TYPE(__pyx_t_2)->tp_name), 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 132; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_v_li = ((PyObject *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line133")'> 133:         tcmap = tcmapnew2(ld)</pre>
<pre id='line133' class='code' style='background-color: #FFFFff'>
    __pyx_v_tcmap = tcmapnew2(__pyx_v_ld);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line134")'> 134: </pre>
<pre id='line134' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF2c' onclick='toggleDiv("line135")'> 135:         for key, val in li:</pre>
<pre id='line135' class='code' style='background-color: #FFFF2c'>
    if (likely(((PyObject *)__pyx_v_li) != Py_None)) {
    __pyx_t_1 = 0; __pyx_t_2 = ((PyObject *)__pyx_v_li); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
  } else {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "'NoneType' object is not iterable");<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 135; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  for (;;) {
    if (__pyx_t_1 >= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_2)) break;
    __pyx_t_3 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_2, __pyx_t_1); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3); __pyx_t_1++;
    if (<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_3) && likely(<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_3) == 2)) {
      PyObject* tuple = __pyx_t_3;
      __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(tuple, 0); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(tuple, 1); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_key);
      __pyx_v_key = __pyx_t_4;
      __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_val);
      __pyx_v_val = __pyx_t_5;
      __pyx_t_5 = 0;
    } else {
      __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 135; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_UnpackItem</span>(__pyx_t_6, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 135; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_UnpackItem</span>(__pyx_t_6, 1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 135; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
      if (<span class='pyx_c_api'>__Pyx_EndUnpack</span>(__pyx_t_6) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 135; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_key);
      __pyx_v_key = __pyx_t_4;
      __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_val);
      __pyx_v_val = __pyx_t_5;
      __pyx_t_5 = 0;
    }
</pre><pre class='line' style='background-color: #FFFF66' onclick='toggleDiv("line136")'> 136:             ps.PyString_AsStringAndSize(key, &amp;kbuf, &amp;ksiz)</pre>
<pre id='line136' class='code' style='background-color: #FFFF66'>
        __pyx_t_7 = <span class='py_c_api'>PyString_AsStringAndSize</span>(__pyx_v_key, (&__pyx_v_kbuf), (&__pyx_v_ksiz));<span class='error_goto'> if (unlikely(__pyx_t_7 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 136; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFF66' onclick='toggleDiv("line137")'> 137:             ps.PyString_AsStringAndSize(val, &amp;vbuf, &amp;vsiz)</pre>
<pre id='line137' class='code' style='background-color: #FFFF66'>
        __pyx_t_7 = <span class='py_c_api'>PyString_AsStringAndSize</span>(__pyx_v_val, (&__pyx_v_vbuf), (&__pyx_v_vsiz));<span class='error_goto'> if (unlikely(__pyx_t_7 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 137; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line138")'> 138:             tcmapput(tcmap, kbuf, ksiz, vbuf, vsiz)</pre>
<pre id='line138' class='code' style='background-color: #FFFF79'>
        tcmapput(__pyx_v_tcmap, __pyx_v_kbuf, __pyx_v_ksiz, __pyx_v_vbuf, __pyx_v_vsiz);
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF5b' onclick='toggleDiv("line139")'> 139:         return tcmap</pre>
<pre id='line139' class='code' style='background-color: #FFFF5b'>
    __pyx_r = __pyx_v_tcmap;
  goto __pyx_L0;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("ctctable.TCTable._dict_to_tcmap");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_li);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_key);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_val);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_d);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line140")'> 140: </pre>
<pre id='line140' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line141")'> 141:     def optimize_index(self, colname):</pre>
<pre id='line141' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_7TCTable_optimize_index(PyObject *__pyx_v_self, PyObject *__pyx_v_colname); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable_optimize_index(PyObject *__pyx_v_self, PyObject *__pyx_v_colname) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("optimize_index");
</pre><pre class='line' style='background-color: #FFFF52' onclick='toggleDiv("line142")'> 142:         return self.create_index(colname, 'o')</pre>
<pre id='line142' class='code' style='background-color: #FFFF52'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(__pyx_v_colname);<span class='error_goto'> if (unlikely((!__pyx_t_1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 142; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_2 = __Pyx_<span class='py_c_api'>PyBool_FromLong</span>(((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->create_index(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_t_1, ((PyObject *)__pyx_n_s__o), 0));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 142; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.optimize_index");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line143")'> 143:     def delete_index(self, colname):</pre>
<pre id='line143' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_7TCTable_delete_index(PyObject *__pyx_v_self, PyObject *__pyx_v_colname); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable_delete_index(PyObject *__pyx_v_self, PyObject *__pyx_v_colname) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("delete_index");
</pre><pre class='line' style='background-color: #FFFF52' onclick='toggleDiv("line144")'> 144:         return self.create_index(colname, 'v')</pre>
<pre id='line144' class='code' style='background-color: #FFFF52'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(__pyx_v_colname);<span class='error_goto'> if (unlikely((!__pyx_t_1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 144; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_2 = __Pyx_<span class='py_c_api'>PyBool_FromLong</span>(((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->create_index(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_t_1, ((PyObject *)__pyx_n_s__v), 0));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 144; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.delete_index");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line145")'> 145: </pre>
<pre id='line145' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF17' onclick='toggleDiv("line146")'> 146:     cpdef bint create_index(TCTable self, char* colname, idx_type):</pre>
<pre id='line146' class='code' style='background-color: #FFFF17'>
static PyObject *__pyx_pf_8ctctable_7TCTable_create_index(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); static PyObject *__pyx_pf_8ctctable_7TCTable_create_index(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8ctctable_7TCTable_create_index[] = "\n        idx_type is one of:\n           's' for index on a string\n        or 'd' for index on a decimal number.\n        ";
static PyObject *__pyx_pf_8ctctable_7TCTable_create_index(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  char *__pyx_v_colname;
  PyObject *__pyx_v_idx_type = 0;
  PyObject *__pyx_r = NULL;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__colname,&__pyx_n_s__idx_type,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("create_index");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[2] = {0,0};
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__colname);
      if (likely(values[0])) kw_args--;
      else goto __pyx_L5_argtuple_error;
      case  1:
      values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__idx_type);
      if (likely(values[1])) kw_args--;
      else {
        <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("create_index", 1, 2, 2, 1);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "create_index") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    __pyx_v_colname = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(values[0]);<span class='error_goto'> if (unlikely((!__pyx_v_colname) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_idx_type = values[1];
  } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
    goto __pyx_L5_argtuple_error;
  } else {
    __pyx_v_colname = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(<span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0));<span class='error_goto'> if (unlikely((!__pyx_v_colname) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_idx_type = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("create_index", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.create_index");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __Pyx_<span class='py_c_api'>PyBool_FromLong</span>(((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->create_index(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_colname, __pyx_v_idx_type, 1));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 146; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.create_index");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line147")'> 147:         """</pre>
<pre id='line147' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line148")'> 148:         idx_type is one of:</pre>
<pre id='line148' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line149")'> 149:            's' for index on a string</pre>
<pre id='line149' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line150")'> 150:         or 'd' for index on a decimal number.</pre>
<pre id='line150' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line151")'> 151:         """</pre>
<pre id='line151' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF44' onclick='toggleDiv("line152")'> 152:         idx_lookup = {'s': TDBITLEXICAL, 'd': TDBITDECIMAL,</pre>
<pre id='line152' class='code' style='background-color: #FFFF44'>
    __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 152; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));
  __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBITLEXICAL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 152; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, ((PyObject *)__pyx_n_s__s), __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 152; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBITDECIMAL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 152; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, ((PyObject *)__pyx_n_s__d), __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 152; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF4d' onclick='toggleDiv("line153")'> 153:                       'o': TDBITOPT, 'v': TDBITVOID }</pre>
<pre id='line153' class='code' style='background-color: #FFFF4d'>
    __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBITOPT);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 153; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, ((PyObject *)__pyx_n_s__o), __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 152; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBITVOID);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 153; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, ((PyObject *)__pyx_n_s__v), __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 152; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_idx_lookup);
  __pyx_v_idx_lookup = ((PyObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF62' onclick='toggleDiv("line154")'> 154:         cdef int type = idx_lookup[idx_type]</pre>
<pre id='line154' class='code' style='background-color: #FFFF62'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_idx_lookup, __pyx_v_idx_type);<span class='error_goto'> if (!__pyx_t_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 154; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_5 = __Pyx_<span class='py_c_api'>PyInt_AsInt</span>(__pyx_t_1);<span class='error_goto'> if (unlikely((__pyx_t_5 == (int)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 154; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_type = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFF96' onclick='toggleDiv("line155")'> 155:         return tctdbsetindex(self._state, colname, type)</pre>
<pre id='line155' class='code' style='background-color: #FFFF96'>
    __pyx_r = tctdbsetindex(__pyx_v_self->_state, __pyx_v_colname, __pyx_v_type);
  goto __pyx_L0;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("ctctable.TCTable.create_index");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_idx_lookup);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line156")'> 156: </pre>
<pre id='line156' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line157")'> 157: </pre>
<pre id='line157' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line158")'> 158:     def __setitem__(self, k, dic):</pre>
<pre id='line158' class='code' style='background-color: #FFFFb6'>
static int __pyx_pf_8ctctable_7TCTable___setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_k, PyObject *__pyx_v_dic); /*proto*/
static int __pyx_pf_8ctctable_7TCTable___setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_k, PyObject *__pyx_v_dic) {
  TCMAP *__pyx_v_tcmap;
  char *__pyx_v_kbuf;
  Py_ssize_t __pyx_v_ksiz;
  int __pyx_v_success;
  int __pyx_r;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__setitem__");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_dic);
</pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line159")'> 159:         cdef TCMAP * tcmap = self._dict_to_tcmap(dic)</pre>
<pre id='line159' class='code' style='background-color: #FFFF7f'>
    if (!(likely(<span class='py_c_api'>PyDict_CheckExact</span>(__pyx_v_dic))||((__pyx_v_dic) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected dict, got %.200s", Py_TYPE(__pyx_v_dic)->tp_name), 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 159; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_v_tcmap = ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_dict_to_tcmap(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), ((PyObject *)__pyx_v_dic));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line160")'> 160:         cdef char *kbuf</pre>
<pre id='line160' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line161")'> 161:         cdef Py_ssize_t ksiz</pre>
<pre id='line161' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line162")'> 162:         cdef bint success</pre>
<pre id='line162' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line163")'> 163:         ps.PyString_AsStringAndSize(k, &amp;kbuf, &amp;ksiz)</pre>
<pre id='line163' class='code' style='background-color: #FFFF7f'>
    __pyx_t_1 = <span class='py_c_api'>PyString_AsStringAndSize</span>(__pyx_v_k, (&__pyx_v_kbuf), (&__pyx_v_ksiz));<span class='error_goto'> if (unlikely(__pyx_t_1 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 163; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line164")'> 164:         success = tctdbput(self._state, kbuf, ksiz, tcmap)</pre>
<pre id='line164' class='code' style='background-color: #FFFFaa'>
    __pyx_v_success = tctdbput(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state, __pyx_v_kbuf, __pyx_v_ksiz, __pyx_v_tcmap);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line165")'> 165:         tcmapdel(tcmap)</pre>
<pre id='line165' class='code' style='background-color: #FFFFaa'>
    tcmapdel(__pyx_v_tcmap);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line166")'> 166: </pre>
<pre id='line166' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line167")'> 167:         if not success:</pre>
<pre id='line167' class='code' style='background-color: #FFFFff'>
    __pyx_t_2 = (!__pyx_v_success);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFF2c' onclick='toggleDiv("line168")'> 168:             self._throw('Unable to write to database '+ str(k))</pre>
<pre id='line168' class='code' style='background-color: #FFFF2c'>
        __pyx_t_3 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s___throw);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_k);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_v_k);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_k);
    __pyx_t_5 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='py_c_api'>PyNumber_Add</span>(((PyObject *)__pyx_kp_s_9), __pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_4);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_3, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 168; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    goto __pyx_L5;
  }
  __pyx_L5:;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.__setitem__");
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_dic);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line169")'> 169: </pre>
<pre id='line169' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line170")'> 170:     cdef dict _tcmap_to_dict(TCTable self, TCMAP *tcmap):</pre>
<pre id='line170' class='code' style='background-color: #FFFFb6'>
static  PyObject *__pyx_f_8ctctable_7TCTable__tcmap_to_dict(struct __pyx_obj_8ctctable_TCTable *__pyx_v_self, TCMAP *__pyx_v_tcmap) {
  PyObject *__pyx_v_d = 0;
  int __pyx_v_ksiz;
  int __pyx_v_vsiz;
  char *__pyx_v_vptr;
  char *__pyx_v_kptr;
  PyObject *__pyx_v_pykey;
  PyObject *__pyx_v_pyval;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_tcmap_to_dict");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  __pyx_v_pykey = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_v_pyval = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line171")'> 171:         cdef dict d = {}</pre>
<pre id='line171' class='code' style='background-color: #FFFFaa'>
    __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 171; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));
  __pyx_v_d = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line172")'> 172:         tcmapiterinit(tcmap)</pre>
<pre id='line172' class='code' style='background-color: #FFFFff'>
    tcmapiterinit(__pyx_v_tcmap);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line173")'> 173:         cdef int ksiz, vsiz</pre>
<pre id='line173' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line174")'> 174: </pre>
<pre id='line174' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line175")'> 175:         cdef char *vptr, *kptr = &lt;char *&gt;tcmapiternext(tcmap, &amp;ksiz)</pre>
<pre id='line175' class='code' style='background-color: #FFFFff'>
    __pyx_v_kptr = ((char *)tcmapiternext(__pyx_v_tcmap, (&__pyx_v_ksiz)));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line176")'> 176:         while kptr != NULL:</pre>
<pre id='line176' class='code' style='background-color: #FFFFff'>
    while (1) {
    __pyx_t_2 = (__pyx_v_kptr != NULL);
    if (!__pyx_t_2) break;
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line177")'> 177:             vptr = &lt;char *&gt;tcmapget(tcmap, &lt;void *&gt;kptr, ksiz, &amp;vsiz)</pre>
<pre id='line177' class='code' style='background-color: #FFFFaa'>
        __pyx_v_vptr = ((char *)tcmapget(__pyx_v_tcmap, ((void *)__pyx_v_kptr), __pyx_v_ksiz, (&__pyx_v_vsiz)));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line178")'> 178: </pre>
<pre id='line178' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF62' onclick='toggleDiv("line179")'> 179:             pykey = ps.PyString_FromStringAndSize(kptr, &lt;Py_ssize_t&gt;ksiz)</pre>
<pre id='line179' class='code' style='background-color: #FFFF62'>
        __pyx_t_1 = <span class='py_c_api'>PyString_FromStringAndSize</span>(__pyx_v_kptr, ((Py_ssize_t)__pyx_v_ksiz));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 179; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_pykey);
    __pyx_v_pykey = __pyx_t_1;
    __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF62' onclick='toggleDiv("line180")'> 180:             pyval = ps.PyString_FromStringAndSize(vptr, &lt;Py_ssize_t&gt;vsiz)</pre>
<pre id='line180' class='code' style='background-color: #FFFF62'>
        __pyx_t_1 = <span class='py_c_api'>PyString_FromStringAndSize</span>(__pyx_v_vptr, ((Py_ssize_t)__pyx_v_vsiz));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 180; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_pyval);
    __pyx_v_pyval = __pyx_t_1;
    __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF66' onclick='toggleDiv("line181")'> 181:             d[pykey] = pyval</pre>
<pre id='line181' class='code' style='background-color: #FFFF66'>
        if (<span class='py_c_api'>PyDict_SetItem</span>(((PyObject *)__pyx_v_d), __pyx_v_pykey, __pyx_v_pyval) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 181; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line182")'> 182: </pre>
<pre id='line182' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line183")'> 183:             kptr = &lt;char *&gt;tcmapiternext(tcmap, &amp;ksiz)</pre>
<pre id='line183' class='code' style='background-color: #FFFFff'>
        __pyx_v_kptr = ((char *)tcmapiternext(__pyx_v_tcmap, (&__pyx_v_ksiz)));
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line184")'> 184: </pre>
<pre id='line184' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line185")'> 185:         return d</pre>
<pre id='line185' class='code' style='background-color: #FFFF79'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_d));
  __pyx_r = __pyx_v_d;
  goto __pyx_L0;

  __pyx_r = ((PyObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable._tcmap_to_dict");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_d);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_pykey);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_pyval);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line186")'> 186: </pre>
<pre id='line186' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line187")'> 187: </pre>
<pre id='line187' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line188")'> 188:     cdef dict _key_to_dict(TCTable self, key):</pre>
<pre id='line188' class='code' style='background-color: #FFFFc4'>
static  PyObject *__pyx_f_8ctctable_7TCTable__key_to_dict(struct __pyx_obj_8ctctable_TCTable *__pyx_v_self, PyObject *__pyx_v_key) {
  char *__pyx_v_kbuf;
  Py_ssize_t __pyx_v_ksiz;
  TCMAP *__pyx_v_tcmap;
  PyObject *__pyx_v_dic = 0;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_key_to_dict");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_key);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line189")'> 189:         """INTERNAL: take the database key and return</pre>
<pre id='line189' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line190")'> 190:         the dicitonary associated with that key"""</pre>
<pre id='line190' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line191")'> 191:         cdef char *kbuf</pre>
<pre id='line191' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line192")'> 192:         cdef Py_ssize_t ksiz</pre>
<pre id='line192' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line193")'> 193:         ps.PyString_AsStringAndSize(key, &amp;kbuf, &amp;ksiz)</pre>
<pre id='line193' class='code' style='background-color: #FFFF7f'>
    __pyx_t_1 = <span class='py_c_api'>PyString_AsStringAndSize</span>(__pyx_v_key, (&__pyx_v_kbuf), (&__pyx_v_ksiz));<span class='error_goto'> if (unlikely(__pyx_t_1 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 193; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line194")'> 194:         cdef TCMAP *tcmap = tctdbget(self._state, kbuf, &lt;int&gt;ksiz)</pre>
<pre id='line194' class='code' style='background-color: #FFFFaa'>
    __pyx_v_tcmap = tctdbget(__pyx_v_self->_state, __pyx_v_kbuf, ((int)__pyx_v_ksiz));
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line195")'> 195:         if tcmap == NULL:</pre>
<pre id='line195' class='code' style='background-color: #FFFFaa'>
    __pyx_t_2 = (__pyx_v_tcmap == NULL);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFF39' onclick='toggleDiv("line196")'> 196:             raise KeyError('Lookup failed: ' + str(key))</pre>
<pre id='line196' class='code' style='background-color: #FFFF39'>
        __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 196; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_key);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_v_key);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_key);
    __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 196; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyNumber_Add</span>(((PyObject *)__pyx_kp_s_10), __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 196; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 196; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_3);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_builtin_KeyError, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 196; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_3, 0, 0);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
   <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 196; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    goto __pyx_L3;
  }
  __pyx_L3:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line197")'> 197: </pre>
<pre id='line197' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line198")'> 198:         cdef dict dic = self._tcmap_to_dict(tcmap)</pre>
<pre id='line198' class='code' style='background-color: #FFFFff'>
    __pyx_t_3 = ((PyObject *)((struct __pyx_vtabstruct_8ctctable_TCTable *)__pyx_v_self->__pyx_vtab)->_tcmap_to_dict(__pyx_v_self, __pyx_v_tcmap));<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 198; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  __pyx_v_dic = ((PyObject *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line199")'> 199:         tcmapdel(tcmap)</pre>
<pre id='line199' class='code' style='background-color: #FFFFff'>
    tcmapdel(__pyx_v_tcmap);
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line200")'> 200:         return dic</pre>
<pre id='line200' class='code' style='background-color: #FFFF79'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_dic));
  __pyx_r = __pyx_v_dic;
  goto __pyx_L0;

  __pyx_r = ((PyObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable._key_to_dict");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_dic);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_key);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line201")'> 201: </pre>
<pre id='line201' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line202")'> 202:     cdef inline dict _ckey_to_dict(TCTable self, char *kbuf, int ksiz):</pre>
<pre id='line202' class='code' style='background-color: #FFFFd4'>
static INLINE PyObject *__pyx_f_8ctctable_7TCTable__ckey_to_dict(struct __pyx_obj_8ctctable_TCTable *__pyx_v_self, char *__pyx_v_kbuf, int __pyx_v_ksiz) {
  TCMAP *__pyx_v_tcmap;
  PyObject *__pyx_v_d = 0;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_ckey_to_dict");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line203")'> 203:         cdef TCMAP *tcmap = tctdbget(self._state, kbuf, &lt;int&gt;ksiz)</pre>
<pre id='line203' class='code' style='background-color: #FFFFff'>
    __pyx_v_tcmap = tctdbget(__pyx_v_self->_state, __pyx_v_kbuf, ((int)__pyx_v_ksiz));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line204")'> 204:         if tcmap == NULL:</pre>
<pre id='line204' class='code' style='background-color: #FFFFff'>
    __pyx_t_1 = (__pyx_v_tcmap == NULL);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFF35' onclick='toggleDiv("line205")'> 205:             raise KeyError('Lookup failed: ' + str(kbuf))</pre>
<pre id='line205' class='code' style='background-color: #FFFF35'>
        __pyx_t_2 = __Pyx_<span class='py_c_api'>PyBytes_FromString</span>(__pyx_v_kbuf);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_2);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_2);
    __pyx_t_2 = 0;
    __pyx_t_2 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyNumber_Add</span>(((PyObject *)__pyx_kp_s_10), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_builtin_KeyError, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_3, 0, 0);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
   <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    goto __pyx_L3;
  }
  __pyx_L3:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line206")'> 206:         cdef dict d = self._tcmap_to_dict(tcmap)</pre>
<pre id='line206' class='code' style='background-color: #FFFFff'>
    __pyx_t_3 = ((PyObject *)((struct __pyx_vtabstruct_8ctctable_TCTable *)__pyx_v_self->__pyx_vtab)->_tcmap_to_dict(__pyx_v_self, __pyx_v_tcmap));<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 206; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  __pyx_v_d = ((PyObject *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line207")'> 207:         tcmapdel(tcmap)</pre>
<pre id='line207' class='code' style='background-color: #FFFFff'>
    tcmapdel(__pyx_v_tcmap);
</pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line208")'> 208:         return d</pre>
<pre id='line208' class='code' style='background-color: #FFFF7f'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_d));
  __pyx_r = __pyx_v_d;
  goto __pyx_L0;

  __pyx_r = ((PyObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable._ckey_to_dict");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_d);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line209")'> 209: </pre>
<pre id='line209' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line210")'> 210:     def __iter__(self):</pre>
<pre id='line210' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_7TCTable___iter__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable___iter__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__iter__");
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line211")'> 211:         tctdbiterinit(self._state)</pre>
<pre id='line211' class='code' style='background-color: #FFFFff'>
    tctdbiterinit(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state);
</pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line212")'> 212:         return self</pre>
<pre id='line212' class='code' style='background-color: #FFFFb6'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line213")'> 213: </pre>
<pre id='line213' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line214")'> 214:     def __next__(self):</pre>
<pre id='line214' class='code' style='background-color: #FFFFd4'>
static PyObject *__pyx_pf_8ctctable_7TCTable___next__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable___next__(PyObject *__pyx_v_self) {
  TCMAP *__pyx_v_tcmap;
  PyObject *__pyx_v_d = 0;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__next__");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line215")'> 215:         cdef TCMAP *tcmap = tctdbiternext3(self._state)</pre>
<pre id='line215' class='code' style='background-color: #FFFFff'>
    __pyx_v_tcmap = tctdbiternext3(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line216")'> 216:         if tcmap == NULL:</pre>
<pre id='line216' class='code' style='background-color: #FFFFff'>
    __pyx_t_1 = (__pyx_v_tcmap == NULL);
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line217")'> 217:             raise StopIteration</pre>
<pre id='line217' class='code' style='background-color: #FFFFd4'>
        <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_builtin_StopIteration, 0, 0);
   <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 217; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    goto __pyx_L5;
  }
  __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line218")'> 218:         cdef dict d = self._tcmap_to_dict(tcmap)</pre>
<pre id='line218' class='code' style='background-color: #FFFFff'>
    __pyx_t_2 = ((PyObject *)((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_tcmap_to_dict(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_tcmap));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 218; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_v_d = ((PyObject *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line219")'> 219:         tcmapdel(tcmap)</pre>
<pre id='line219' class='code' style='background-color: #FFFFff'>
    tcmapdel(__pyx_v_tcmap);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line220")'> 220:         # the key is stored in the tcmap with its key as ''</pre>
<pre id='line220' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF36' onclick='toggleDiv("line221")'> 221:         return d.pop(''), d</pre>
<pre id='line221' class='code' style='background-color: #FFFF36'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_v_d), __pyx_n_s__pop);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 221; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 221; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_kp_s_11));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, ((PyObject *)__pyx_kp_s_11));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_kp_s_11));
  __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_2, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 221; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 221; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_4);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_d));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, ((PyObject *)__pyx_v_d));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_v_d));
  __pyx_t_4 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.__next__");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_d);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line222")'> 222: </pre>
<pre id='line222' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line223")'> 223: </pre>
<pre id='line223' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF37' onclick='toggleDiv("line224")'> 224:     def keep_or_put(self, k, dic):</pre>
<pre id='line224' class='code' style='background-color: #FFFF37'>
static PyObject *__pyx_pf_8ctctable_7TCTable_keep_or_put(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8ctctable_7TCTable_keep_or_put[] = "Takes as arguments a key (string) and a value (dict).\n        If the key already exists in the table, nothing is done\n        and the string 'keep' is returned.\n        Otherwise, the value is stored at the key and 'put' is returned.\n        ";
static PyObject *__pyx_pf_8ctctable_7TCTable_keep_or_put(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_k = 0;
  PyObject *__pyx_v_dic = 0;
  char *__pyx_v_kbuf;
  Py_ssize_t __pyx_v_ksiz;
  TCMAP *__pyx_v_tcmap;
  int __pyx_v_success;
  int __pyx_v_errorcode;
  PyObject *__pyx_r = NULL;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__k,&__pyx_n_s__dic,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("keep_or_put");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[2] = {0,0};
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__k);
      if (likely(values[0])) kw_args--;
      else goto __pyx_L5_argtuple_error;
      case  1:
      values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__dic);
      if (likely(values[1])) kw_args--;
      else {
        <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("keep_or_put", 1, 2, 2, 1);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 224; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "keep_or_put") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 224; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    __pyx_v_k = values[0];
    __pyx_v_dic = values[1];
  } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
    goto __pyx_L5_argtuple_error;
  } else {
    __pyx_v_k = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
    __pyx_v_dic = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("keep_or_put", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 224; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.keep_or_put");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_dic);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line225")'> 225:         '''Takes as arguments a key (string) and a value (dict).</pre>
<pre id='line225' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line226")'> 226:         If the key already exists in the table, nothing is done</pre>
<pre id='line226' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line227")'> 227:         and the string 'keep' is returned.</pre>
<pre id='line227' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line228")'> 228:         Otherwise, the value is stored at the key and 'put' is returned.</pre>
<pre id='line228' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line229")'> 229:         '''</pre>
<pre id='line229' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line230")'> 230:         cdef char *kbuf</pre>
<pre id='line230' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line231")'> 231:         cdef Py_ssize_t ksiz</pre>
<pre id='line231' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line232")'> 232:         ps.PyString_AsStringAndSize(k, &amp;kbuf, &amp;ksiz)</pre>
<pre id='line232' class='code' style='background-color: #FFFF7f'>
    __pyx_t_1 = <span class='py_c_api'>PyString_AsStringAndSize</span>(__pyx_v_k, (&__pyx_v_kbuf), (&__pyx_v_ksiz));<span class='error_goto'> if (unlikely(__pyx_t_1 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 232; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFF66' onclick='toggleDiv("line233")'> 233:         cdef TCMAP * tcmap = self._dict_to_tcmap(dic)</pre>
<pre id='line233' class='code' style='background-color: #FFFF66'>
    if (!(likely(<span class='py_c_api'>PyDict_CheckExact</span>(__pyx_v_dic))||((__pyx_v_dic) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected dict, got %.200s", Py_TYPE(__pyx_v_dic)->tp_name), 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 233; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_v_tcmap = ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_dict_to_tcmap(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), ((PyObject *)__pyx_v_dic));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line234")'> 234:         cdef bint success = tctdbputkeep(self._state, &lt;void *&gt;kbuf,</pre>
<pre id='line234' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line235")'> 235:                                           &lt;int&gt;ksiz, tcmap)</pre>
<pre id='line235' class='code' style='background-color: #FFFFff'>
    __pyx_v_success = tctdbputkeep(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state, ((void *)__pyx_v_kbuf), ((int)__pyx_v_ksiz), __pyx_v_tcmap);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line236")'> 236: </pre>
<pre id='line236' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line237")'> 237:         tcmapdel(tcmap)</pre>
<pre id='line237' class='code' style='background-color: #FFFFff'>
    tcmapdel(__pyx_v_tcmap);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line238")'> 238:         # according to http://1978th.net/tokyocabinet/spex-en.html</pre>
<pre id='line238' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line239")'> 239:         cdef int errorcode</pre>
<pre id='line239' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line240")'> 240:         if not success:</pre>
<pre id='line240' class='code' style='background-color: #FFFFff'>
    __pyx_t_2 = (!__pyx_v_success);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line241")'> 241:             errorcode = tctdbecode(self._state)</pre>
<pre id='line241' class='code' style='background-color: #FFFFff'>
        __pyx_v_errorcode = tctdbecode(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line242")'> 242:             if errorcode == 21: # 'existing record'</pre>
<pre id='line242' class='code' style='background-color: #FFFFff'>
        __pyx_t_2 = (__pyx_v_errorcode == 21);
    if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line243")'> 243:                 return 'keep'</pre>
<pre id='line243' class='code' style='background-color: #FFFFd4'>
            <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__keep));
      __pyx_r = ((PyObject *)__pyx_n_s__keep);
      goto __pyx_L0;
      goto __pyx_L7;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line244")'> 244:             else:</pre>
<pre id='line244' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF2a' onclick='toggleDiv("line245")'> 245:                 self._throw('Unable to write key "{0}".'.format(str(k)))</pre>
<pre id='line245' class='code' style='background-color: #FFFF2a'>
            __pyx_t_3 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s___throw);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 245; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
      __pyx_t_4 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_12), __pyx_n_s__format);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 245; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 245; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_k);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_v_k);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_k);
      __pyx_t_6 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 245; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 245; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_6);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_6);
      __pyx_t_6 = 0;
      __pyx_t_6 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_4, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 245; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 245; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_6);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_6);
      __pyx_t_6 = 0;
      __pyx_t_6 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_3, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 245; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    }
    __pyx_L7:;
    goto __pyx_L6;
  }
  __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFF6e' onclick='toggleDiv("line246")'> 246:         return 'put'</pre>
<pre id='line246' class='code' style='background-color: #FFFF6e'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__put));
  __pyx_r = ((PyObject *)__pyx_n_s__put);
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.keep_or_put");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_dic);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line247")'> 247: </pre>
<pre id='line247' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF37' onclick='toggleDiv("line248")'> 248:     def setdefault(self, k, dic):</pre>
<pre id='line248' class='code' style='background-color: #FFFF37'>
static PyObject *__pyx_pf_8ctctable_7TCTable_setdefault(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8ctctable_7TCTable_setdefault[] = "Writes a record -- d[k] = dic -- if k not in d.\n        Then returns d[k].\n        ";
static PyObject *__pyx_pf_8ctctable_7TCTable_setdefault(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_k = 0;
  PyObject *__pyx_v_dic = 0;
  PyObject *__pyx_r = NULL;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__k,&__pyx_n_s__dic,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("setdefault");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[2] = {0,0};
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__k);
      if (likely(values[0])) kw_args--;
      else goto __pyx_L5_argtuple_error;
      case  1:
      values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__dic);
      if (likely(values[1])) kw_args--;
      else {
        <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("setdefault", 1, 2, 2, 1);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 248; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "setdefault") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 248; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    __pyx_v_k = values[0];
    __pyx_v_dic = values[1];
  } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
    goto __pyx_L5_argtuple_error;
  } else {
    __pyx_v_k = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
    __pyx_v_dic = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("setdefault", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 248; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.setdefault");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_dic);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line249")'> 249:         '''Writes a record -- d[k] = dic -- if k not in d.</pre>
<pre id='line249' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line250")'> 250:         Then returns d[k].</pre>
<pre id='line250' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line251")'> 251:         '''</pre>
<pre id='line251' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF3b' onclick='toggleDiv("line252")'> 252:         if self.keep_or_put(k, dic) == 'keep':</pre>
<pre id='line252' class='code' style='background-color: #FFFF3b'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s__keep_or_put);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 252; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 252; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_k);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_v_k);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_dic);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_v_dic);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_dic);
  __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_1, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 252; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, ((PyObject *)__pyx_n_s__keep), Py_EQ);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 252; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_4 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_2);<span class='error_goto'> if (unlikely(__pyx_t_4 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 252; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line253")'> 253:             return self.get(k, dic)</pre>
<pre id='line253' class='code' style='background-color: #FFFFe7'>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_t_5.__pyx_n = 1;
    __pyx_t_5.__pyx_default = __pyx_v_dic;
    __pyx_t_2 = ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->get(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_k, 0, &__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 253; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    __pyx_r = __pyx_t_2;
    __pyx_t_2 = 0;
    goto __pyx_L0;
    goto __pyx_L6;
  }
  /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line254")'> 254:         else:</pre>
<pre id='line254' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF73' onclick='toggleDiv("line255")'> 255:             return dic # which certainly has just been put</pre>
<pre id='line255' class='code' style='background-color: #FFFF73'>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_dic);
    __pyx_r = __pyx_v_dic;
    goto __pyx_L0;
  }
  __pyx_L6:;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.setdefault");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_dic);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line256")'> 256: </pre>
<pre id='line256' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line257")'> 257:     def __getitem__(self, key):</pre>
<pre id='line257' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_7TCTable___getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
static char __pyx_doc_8ctctable_7TCTable___getitem__[] = "Returns a record (as a dict) or raises KeyError.";
static PyObject *__pyx_pf_8ctctable_7TCTable___getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__getitem__");
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line258")'> 258:         '''Returns a record (as a dict) or raises KeyError.'''</pre>
<pre id='line258' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line259")'> 259:         return self._key_to_dict(key)</pre>
<pre id='line259' class='code' style='background-color: #FFFF9f'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = ((PyObject *)((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_key_to_dict(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_key));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 259; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.__getitem__");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line260")'> 260: </pre>
<pre id='line260' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF22' onclick='toggleDiv("line261")'> 261:     cpdef get(self, key, default=None):</pre>
<pre id='line261' class='code' style='background-color: #FFFF22'>
static PyObject *__pyx_pf_8ctctable_7TCTable_get(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); static PyObject *__pyx_pf_8ctctable_7TCTable_get(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); struct __pyx_opt_args_8ctctable_7TCTable_get {
  int __pyx_n;
  PyObject *__pyx_default;
};
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line262")'> 262:         try:</pre>
<pre id='line262' class='code' style='background-color: #FFFFd4'>
    {
    PyObject *__pyx_save_exc_type, *__pyx_save_exc_value, *__pyx_save_exc_tb;
    <span class='pyx_c_api'>__Pyx_ExceptionSave</span>(&__pyx_save_exc_type, &__pyx_save_exc_value, &__pyx_save_exc_tb);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGOTREF</span></span>(__pyx_save_exc_type);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGOTREF</span></span>(__pyx_save_exc_value);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGOTREF</span></span>(__pyx_save_exc_tb);
    /*try:*/ {
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line263")'> 263:             v = self._key_to_dict(key)</pre>
<pre id='line263' class='code' style='background-color: #FFFFe7'>
            __pyx_t_1 = ((PyObject *)((struct __pyx_vtabstruct_8ctctable_TCTable *)__pyx_v_self->__pyx_vtab)->_key_to_dict(__pyx_v_self, __pyx_v_key));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 263; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_v);
      __pyx_v_v = __pyx_t_1;
      __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF62' onclick='toggleDiv("line264")'> 264:             return v or default</pre>
<pre id='line264' class='code' style='background-color: #FFFF62'>
            <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      __pyx_t_4 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_v_v);<span class='error_goto'> if (unlikely(__pyx_t_4 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 264; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      if (!__pyx_t_4) {
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_default);
        __pyx_t_1 = __pyx_v_default;
      } else {
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_v);
        __pyx_t_1 = __pyx_v_v;
      }
      __pyx_r = __pyx_t_1;
      __pyx_t_1 = 0;
      goto __pyx_L7_try_return;
    }
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_save_exc_type); __pyx_save_exc_type = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_save_exc_value); __pyx_save_exc_value = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_save_exc_tb); __pyx_save_exc_tb = 0;
    goto __pyx_L10_try_end;
    __pyx_L7_try_return:;
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_type);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_value);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_tb);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_save_exc_type, __pyx_save_exc_value, __pyx_save_exc_tb);
    goto __pyx_L0;
    __pyx_L3_error:;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF86' onclick='toggleDiv("line265")'> 265:         except KeyError:</pre>
<pre id='line265' class='code' style='background-color: #FFFF86'>
        __pyx_t_5 = <span class='py_c_api'>PyErr_ExceptionMatches</span>(__pyx_builtin_KeyError);
    if (__pyx_t_5) {
      <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.get");
      if (<span class='pyx_c_api'>__Pyx_GetException</span>(&__pyx_t_1, &__pyx_t_3, &__pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 265; __pyx_clineno = __LINE__; goto __pyx_L5_except_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
</pre><pre class='line' style='background-color: #FFFF48' onclick='toggleDiv("line266")'> 266:             return default</pre>
<pre id='line266' class='code' style='background-color: #FFFF48'>
            <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_default);
      __pyx_r = __pyx_v_default;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      goto __pyx_L6_except_return;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L4_exception_handled;
    }
    __pyx_L5_except_error:;
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_type);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_value);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_tb);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_save_exc_type, __pyx_save_exc_value, __pyx_save_exc_tb);
    goto __pyx_L1_error;
    __pyx_L6_except_return:;
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_type);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_value);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_tb);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_save_exc_type, __pyx_save_exc_value, __pyx_save_exc_tb);
    goto __pyx_L0;
    __pyx_L4_exception_handled:;
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_type);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_value);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_save_exc_tb);
    <span class='pyx_c_api'>__Pyx_ExceptionReset</span>(__pyx_save_exc_type, __pyx_save_exc_value, __pyx_save_exc_tb);
    __pyx_L10_try_end:;
  }

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.get");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_v);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_key);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_default);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line267")'> 267: </pre>
<pre id='line267' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line268")'> 268:     def __delitem__(self, key):</pre>
<pre id='line268' class='code' style='background-color: #FFFFc4'>
static int __pyx_pf_8ctctable_7TCTable___delitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
static int __pyx_pf_8ctctable_7TCTable___delitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
  char *__pyx_v_kbuf;
  Py_ssize_t __pyx_v_ksiz;
  int __pyx_v_success;
  int __pyx_r;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__delitem__");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_key);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line269")'> 269:         cdef char *kbuf</pre>
<pre id='line269' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line270")'> 270:         cdef Py_ssize_t ksiz</pre>
<pre id='line270' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line271")'> 271:         ps.PyString_AsStringAndSize(key, &amp;kbuf, &amp;ksiz)</pre>
<pre id='line271' class='code' style='background-color: #FFFF7f'>
    __pyx_t_1 = <span class='py_c_api'>PyString_AsStringAndSize</span>(__pyx_v_key, (&__pyx_v_kbuf), (&__pyx_v_ksiz));<span class='error_goto'> if (unlikely(__pyx_t_1 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 271; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line272")'> 272:         cdef bint success = tctdbout(self._state, kbuf, ksiz)</pre>
<pre id='line272' class='code' style='background-color: #FFFFaa'>
    __pyx_v_success = tctdbout(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state, __pyx_v_kbuf, __pyx_v_ksiz);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line273")'> 273:         if not success:</pre>
<pre id='line273' class='code' style='background-color: #FFFFaa'>
    __pyx_t_2 = (!__pyx_v_success);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFF4f' onclick='toggleDiv("line274")'> 274:             raise KeyError(self._msg())</pre>
<pre id='line274' class='code' style='background-color: #FFFF4f'>
        __pyx_t_3 = ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_msg(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 274; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 274; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_3);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_3);
    __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_builtin_KeyError, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 274; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_3, 0, 0);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
   <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 274; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    goto __pyx_L5;
  }
  __pyx_L5:;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.__delitem__");
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_key);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line275")'> 275: </pre>
<pre id='line275' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF38' onclick='toggleDiv("line276")'> 276:     def pop(self, k, d=None):</pre>
<pre id='line276' class='code' style='background-color: #FFFF38'>
static PyObject *__pyx_pf_8ctctable_7TCTable_pop(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_8ctctable_7TCTable_pop[] = "D.pop(k[,d]) -> v, remove specified key and return the\n        corresponding value. If key is not found, d is returned if given,\n        otherwise KeyError is raised.\n        ";
static PyObject *__pyx_pf_8ctctable_7TCTable_pop(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_k = 0;
  PyObject *__pyx_v_d = 0;
  PyObject *__pyx_v_adict;
  PyObject *__pyx_r = NULL;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__k,&__pyx_n_s__d,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("pop");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[2] = {0,0};
    values[1] = ((PyObject *)Py_None);
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__k);
      if (likely(values[0])) kw_args--;
      else goto __pyx_L5_argtuple_error;
      case  1:
      if (kw_args > 1) {
        PyObject* value = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__d);
        if (unlikely(value)) { values[1] = value; kw_args--; }
      }
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "pop") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 276; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    __pyx_v_k = values[0];
    __pyx_v_d = values[1];
  } else {
    __pyx_v_d = ((PyObject *)Py_None);
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  2: __pyx_v_d = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: __pyx_v_k = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      break;
      default: goto __pyx_L5_argtuple_error;
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("pop", 0, 1, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 276; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.pop");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_d);
  __pyx_v_adict = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line277")'> 277:         '''D.pop(k[,d]) -&gt; v, remove specified key and return the</pre>
<pre id='line277' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line278")'> 278:         corresponding value. If key is not found, d is returned if given,</pre>
<pre id='line278' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line279")'> 279:         otherwise KeyError is raised.</pre>
<pre id='line279' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line280")'> 280:         '''</pre>
<pre id='line280' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line281")'> 281:         adict = self.get(k)</pre>
<pre id='line281' class='code' style='background-color: #FFFFe7'>
    __pyx_t_1 = ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->get(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_k, 0, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 281; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_adict);
  __pyx_v_adict = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line282")'> 282:         if adict is None:</pre>
<pre id='line282' class='code' style='background-color: #FFFFff'>
    __pyx_t_2 = (__pyx_v_adict == Py_None);
  if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line283")'> 283:             if d is None:</pre>
<pre id='line283' class='code' style='background-color: #FFFFff'>
        __pyx_t_2 = (__pyx_v_d == Py_None);
    if (__pyx_t_2) {
</pre><pre class='line' style='background-color: #FFFF39' onclick='toggleDiv("line284")'> 284:                 raise KeyError('Key not found: "{0}"'.format(k))</pre>
<pre id='line284' class='code' style='background-color: #FFFF39'>
            __pyx_t_1 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_13), __pyx_n_s__format);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 284; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
      __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 284; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_k);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_v_k);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_k);
      __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_1, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 284; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 284; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_4);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_4);
      __pyx_t_4 = 0;
      __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(__pyx_builtin_KeyError, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 284; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_c_api'>__Pyx_Raise</span>(__pyx_t_4, 0, 0);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 284; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      goto __pyx_L7;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line285")'> 285:             else:</pre>
<pre id='line285' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line286")'> 286:                 return d</pre>
<pre id='line286' class='code' style='background-color: #FFFFd4'>
            <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_d);
      __pyx_r = __pyx_v_d;
      goto __pyx_L0;
    }
    __pyx_L7:;
    goto __pyx_L6;
  }
  /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line287")'> 287:         else:</pre>
<pre id='line287' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line288")'> 288:             del self.k</pre>
<pre id='line288' class='code' style='background-color: #FFFFaa'>
        if (<span class='py_c_api'>PyObject_DelAttr</span>(__pyx_v_self, __pyx_n_s__k) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 288; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFF6e' onclick='toggleDiv("line289")'> 289:             return adict</pre>
<pre id='line289' class='code' style='background-color: #FFFF6e'>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_adict);
    __pyx_r = __pyx_v_adict;
    goto __pyx_L0;
  }
  __pyx_L6:;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.pop");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_adict);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_k);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_d);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line290")'> 290: </pre>
<pre id='line290' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF2f' onclick='toggleDiv("line291")'> 291:     cpdef int size_of(self, key):</pre>
<pre id='line291' class='code' style='background-color: #FFFF2f'>
static PyObject *__pyx_pf_8ctctable_7TCTable_size_of(PyObject *__pyx_v_self, PyObject *__pyx_v_key); static PyObject *__pyx_pf_8ctctable_7TCTable_size_of(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
static char __pyx_doc_8ctctable_7TCTable_size_of[] = "Returns the size of the value stored at the passed *id*,\n        or -1 if the id does not exist in the table database.\n        \n        I don't know why this would be useful... the returned number is\n        a little higher than the amount of characters persisted.\n        ";
static PyObject *__pyx_pf_8ctctable_7TCTable_size_of(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("size_of");
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='py_c_api'>PyInt_FromLong</span>(((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->size_of(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_key, 1));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 291; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.size_of");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line292")'> 292:         '''Returns the size of the value stored at the passed *id*,</pre>
<pre id='line292' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line293")'> 293:         or -1 if the id does not exist in the table database.</pre>
<pre id='line293' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line294")'> 294: </pre>
<pre id='line294' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line295")'> 295:         I don't know why this would be useful... the returned number is</pre>
<pre id='line295' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line296")'> 296:         a little higher than the amount of characters persisted.</pre>
<pre id='line296' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line297")'> 297:         '''</pre>
<pre id='line297' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line298")'> 298:         cdef char *kbuf</pre>
<pre id='line298' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line299")'> 299:         cdef Py_ssize_t   ksiz</pre>
<pre id='line299' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line300")'> 300:         ps.PyString_AsStringAndSize(key, &amp;kbuf, &amp;ksiz)</pre>
<pre id='line300' class='code' style='background-color: #FFFF7f'>
    __pyx_t_4 = <span class='py_c_api'>PyString_AsStringAndSize</span>(__pyx_v_key, (&__pyx_v_kbuf), (&__pyx_v_ksiz));<span class='error_goto'> if (unlikely(__pyx_t_4 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 300; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line301")'> 301:         return tctdbvsiz(self._state, kbuf, &lt;int&gt;ksiz)</pre>
<pre id='line301' class='code' style='background-color: #FFFF79'>
    __pyx_r = tctdbvsiz(__pyx_v_self->_state, __pyx_v_kbuf, ((int)__pyx_v_ksiz));
  goto __pyx_L0;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("ctctable.TCTable.size_of");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line302")'> 302: </pre>
<pre id='line302' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line303")'> 303:     def __contains__(self, key):</pre>
<pre id='line303' class='code' style='background-color: #FFFFe7'>
static int __pyx_pf_8ctctable_7TCTable___contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_key); /*proto*/
static char __pyx_doc_8ctctable_7TCTable___contains__[] = "True if D has a key *key*, else False.\n        But know that calling D.get(id, defaultdict) is cheaper than\n            dic = D[id] if id in D else defaultdict\n        ";
static int __pyx_pf_8ctctable_7TCTable___contains__(PyObject *__pyx_v_self, PyObject *__pyx_v_key) {
  int __pyx_r;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__contains__");
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line304")'> 304:         '''True if D has a key *key*, else False.</pre>
<pre id='line304' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line305")'> 305:         But know that calling D.get(id, defaultdict) is cheaper than</pre>
<pre id='line305' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line306")'> 306:             dic = D[id] if id in D else defaultdict</pre>
<pre id='line306' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line307")'> 307:         '''</pre>
<pre id='line307' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line308")'> 308:         return self.size_of(key) &gt; -1</pre>
<pre id='line308' class='code' style='background-color: #FFFFe7'>
    __pyx_r = (((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->size_of(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_key, 0) > -1);
  goto __pyx_L0;

  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line309")'> 309: </pre>
<pre id='line309' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line310")'> 310:     def flush(self):</pre>
<pre id='line310' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_7TCTable_flush(PyObject *__pyx_v_self, PyObject *unused); /*proto*/
static char __pyx_doc_8ctctable_7TCTable_flush[] = "Forces changes to be written to disk. Returns a success code.";
static PyObject *__pyx_pf_8ctctable_7TCTable_flush(PyObject *__pyx_v_self, PyObject *unused) {
  int __pyx_v_success;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("flush");
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line311")'> 311:         '''Forces changes to be written to disk. Returns a success code.'''</pre>
<pre id='line311' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line312")'> 312:         cdef bint success = tctdbsync(self._state)</pre>
<pre id='line312' class='code' style='background-color: #FFFFff'>
    __pyx_v_success = tctdbsync(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state);
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line313")'> 313:         return success</pre>
<pre id='line313' class='code' style='background-color: #FFFF79'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = __Pyx_<span class='py_c_api'>PyBool_FromLong</span>(__pyx_v_success);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 313; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.flush");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line314")'> 314: </pre>
<pre id='line314' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line315")'> 315:     def __len__(self):</pre>
<pre id='line315' class='code' style='background-color: #FFFFe7'>
static Py_ssize_t __pyx_pf_8ctctable_7TCTable___len__(PyObject *__pyx_v_self); /*proto*/
static Py_ssize_t __pyx_pf_8ctctable_7TCTable___len__(PyObject *__pyx_v_self) {
  Py_ssize_t __pyx_r;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__len__");
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line316")'> 316:         return tctdbrnum(self._state)</pre>
<pre id='line316' class='code' style='background-color: #FFFFe7'>
    __pyx_r = tctdbrnum(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state);
  goto __pyx_L0;

  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line317")'> 317: </pre>
<pre id='line317' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line318")'> 318:     cdef void _set_limit(TCTable self, TDBQRY* query_state, dict kwargs):</pre>
<pre id='line318' class='code' style='background-color: #FFFFaa'>
static  void __pyx_f_8ctctable_7TCTable__set_limit(struct __pyx_obj_8ctctable_TCTable *__pyx_v_self, TDBQRY *__pyx_v_query_state, PyObject *__pyx_v_kwargs) {
  PyObject *__pyx_v_limit;
  PyObject *__pyx_v_offset;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_set_limit");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_kwargs);
  __pyx_v_limit = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_v_offset = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFF4f' onclick='toggleDiv("line319")'> 319:         limit = kwargs.pop('limit', None)</pre>
<pre id='line319' class='code' style='background-color: #FFFF4f'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_v_kwargs), __pyx_n_s__pop);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 319; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 319; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__limit));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_n_s__limit));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_n_s__limit));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, Py_None);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(Py_None);
  __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_1, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 319; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_limit);
  __pyx_v_limit = __pyx_t_3;
  __pyx_t_3 = 0;
</pre><pre class='line' style='background-color: #FFFF4f' onclick='toggleDiv("line320")'> 320:         offset = kwargs.pop('offset', None)</pre>
<pre id='line320' class='code' style='background-color: #FFFF4f'>
    __pyx_t_3 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_v_kwargs), __pyx_n_s__pop);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 320; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 320; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__offset));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_n_s__offset));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_n_s__offset));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, Py_None);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(Py_None);
  __pyx_t_1 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_3, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 320; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_offset);
  __pyx_v_offset = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line321")'> 321:         if (limit is None and offset is None): return</pre>
<pre id='line321' class='code' style='background-color: #FFFFff'>
    __pyx_t_4 = (__pyx_v_limit == Py_None);
  if (__pyx_t_4) {
    __pyx_t_5 = (__pyx_v_offset == Py_None);
    __pyx_t_6 = __pyx_t_5;
  } else {
    __pyx_t_6 = __pyx_t_4;
  }
  if (__pyx_t_6) {
    goto __pyx_L0;
    goto __pyx_L3;
  }
  __pyx_L3:;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line322")'> 322:         if limit is None: limit = -1</pre>
<pre id='line322' class='code' style='background-color: #FFFFd4'>
    __pyx_t_6 = (__pyx_v_limit == Py_None);
  if (__pyx_t_6) {
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_neg_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_limit);
    __pyx_v_limit = __pyx_int_neg_1;
    goto __pyx_L4;
  }
  __pyx_L4:;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line323")'> 323:         if offset is None: offset = 0</pre>
<pre id='line323' class='code' style='background-color: #FFFFd4'>
    __pyx_t_6 = (__pyx_v_offset == Py_None);
  if (__pyx_t_6) {
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_offset);
    __pyx_v_offset = __pyx_int_0;
    goto __pyx_L5;
  }
  __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFF3f' onclick='toggleDiv("line324")'> 324:         tctdbqrysetlimit(query_state, &lt;int&gt;limit, &lt;int&gt;offset)</pre>
<pre id='line324' class='code' style='background-color: #FFFF3f'>
    __pyx_t_7 = __Pyx_<span class='py_c_api'>PyInt_AsInt</span>(__pyx_v_limit);<span class='error_goto'> if (unlikely((__pyx_t_7 == (int)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 324; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_8 = __Pyx_<span class='py_c_api'>PyInt_AsInt</span>(__pyx_v_offset);<span class='error_goto'> if (unlikely((__pyx_t_8 == (int)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 324; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  tctdbqrysetlimit(__pyx_v_query_state, ((int)__pyx_t_7), ((int)__pyx_t_8));

  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("ctctable.TCTable._set_limit");
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_limit);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_offset);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwargs);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line325")'> 325: </pre>
<pre id='line325' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line326")'> 326:     cdef void _set_order(TCTable self, TDBQRY* query_state, dict kwargs):</pre>
<pre id='line326' class='code' style='background-color: #FFFFaa'>
static  void __pyx_f_8ctctable_7TCTable__set_order(struct __pyx_obj_8ctctable_TCTable *__pyx_v_self, TDBQRY *__pyx_v_query_state, PyObject *__pyx_v_kwargs) {
  PyObject *__pyx_v_col;
  PyObject *__pyx_v_direction;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_set_order");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_kwargs);
  __pyx_v_col = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_v_direction = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFF96' onclick='toggleDiv("line327")'> 327:         if not 'order' in kwargs: return</pre>
<pre id='line327' class='code' style='background-color: #FFFF96'>
    if (unlikely(((PyObject *)__pyx_v_kwargs) == Py_None)) {
    <span class='pyx_c_api'>__Pyx_RaiseNoneNotIterableError</span>();<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 327; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  } else {
    __pyx_t_1 = ((<span class='py_c_api'>PyDict_Contains</span>(((PyObject *)__pyx_v_kwargs), ((PyObject *)__pyx_n_s__order))));<span class='error_goto'> if (unlikely(__pyx_t_1 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 327; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_t_2 = (!__pyx_t_1);
  if (__pyx_t_2) {
    goto __pyx_L0;
    goto __pyx_L3;
  }
  __pyx_L3:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line328")'> 328:         # TODO: handle nums. NUMASC, NUMDESC how?</pre>
<pre id='line328' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line329")'> 329:         #"order='+name' or order='-name'</pre>
<pre id='line329' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line330")'> 330:         col = kwargs['order']</pre>
<pre id='line330' class='code' style='background-color: #FFFF9f'>
    __pyx_t_3 = <span class='py_c_api'>PyObject_GetItem</span>(((PyObject *)__pyx_v_kwargs), ((PyObject *)__pyx_n_s__order));<span class='error_goto'> if (!__pyx_t_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 330; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_col);
  __pyx_v_col = __pyx_t_3;
  __pyx_t_3 = 0;
</pre><pre class='line' style='background-color: #FFFF48' onclick='toggleDiv("line331")'> 331:         if col[0] not in ('+', '-'):</pre>
<pre id='line331' class='code' style='background-color: #FFFF48'>
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_col, 0, sizeof(long), PyInt_FromLong);<span class='error_goto'> if (!__pyx_t_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 331; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  __pyx_t_4 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, ((PyObject *)__pyx_kp_s_14), Py_NE);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 331; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  __pyx_t_2 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_4);<span class='error_goto'> if (unlikely((__pyx_t_2 == (int)-1))) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 331; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_1 = ((int)__pyx_t_2);
  if (__pyx_t_1) {
    __pyx_t_4 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, ((PyObject *)__pyx_kp_s_15), Py_NE);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 331; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    __pyx_t_2 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_4);<span class='error_goto'> if (unlikely((__pyx_t_2 == (int)-1))) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 331; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = ((int)__pyx_t_2);
    __pyx_t_2 = __pyx_t_5;
  } else {
    __pyx_t_2 = __pyx_t_1;
  }
  __pyx_t_1 = __pyx_t_2;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line332")'> 332:             direction = TDBQOSTRASC</pre>
<pre id='line332' class='code' style='background-color: #FFFF9f'>
        __pyx_t_3 = <span class='py_c_api'>PyInt_FromLong</span>(TDBQOSTRASC);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 332; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_direction);
    __pyx_v_direction = __pyx_t_3;
    __pyx_t_3 = 0;
    goto __pyx_L4;
  }
  /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line333")'> 333:         else:</pre>
<pre id='line333' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF55' onclick='toggleDiv("line334")'> 334:             direction = TDBQOSTRASC if col[0] == '+' else TDBQOSTRDESC</pre>
<pre id='line334' class='code' style='background-color: #FFFF55'>
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_col, 0, sizeof(long), PyInt_FromLong);<span class='error_goto'> if (!__pyx_t_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 334; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    __pyx_t_4 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, ((PyObject *)__pyx_kp_s_14), Py_EQ);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 334; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_1 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_4);<span class='error_goto'> if (unlikely(__pyx_t_1 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 334; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_1) {
      __pyx_t_6 = TDBQOSTRASC;
    } else {
      __pyx_t_6 = TDBQOSTRDESC;
    }
    __pyx_t_4 = <span class='py_c_api'>PyInt_FromLong</span>(__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 334; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_direction);
    __pyx_v_direction = __pyx_t_4;
    __pyx_t_4 = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line335")'> 335:             col = col[1:]</pre>
<pre id='line335' class='code' style='background-color: #FFFF9f'>
        __pyx_t_4 = <span class='py_c_api'>PySequence_GetSlice</span>(__pyx_v_col, 1, PY_SSIZE_T_MAX);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 335; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_col);
    __pyx_v_col = __pyx_t_4;
    __pyx_t_4 = 0;
  }
  __pyx_L4:;
</pre><pre class='line' style='background-color: #FFFF41' onclick='toggleDiv("line336")'> 336:         tctdbqrysetorder(query_state, col, direction)</pre>
<pre id='line336' class='code' style='background-color: #FFFF41'>
    __pyx_t_7 = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(__pyx_v_col);<span class='error_goto'> if (unlikely((!__pyx_t_7) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 336; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_8 = __Pyx_<span class='py_c_api'>PyInt_AsInt</span>(__pyx_v_direction);<span class='error_goto'> if (unlikely((__pyx_t_8 == (int)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 336; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  tctdbqrysetorder(__pyx_v_query_state, __pyx_t_7, __pyx_t_8);

  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_WriteUnraisable</span>("ctctable.TCTable._set_order");
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_col);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_direction);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwargs);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line337")'> 337: </pre>
<pre id='line337' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF6a' onclick='toggleDiv("line338")'> 338:     def count(self, *args, **kwargs):</pre>
<pre id='line338' class='code' style='background-color: #FFFF6a'>
static PyObject *__pyx_pf_8ctctable_7TCTable_count(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable_count(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_args = 0;
  PyObject *__pyx_v_kwargs = 0;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("count");
  if (unlikely(__pyx_kwds) && unlikely(!<span class='pyx_c_api'>__Pyx_CheckKeywordStrings</span>(__pyx_kwds, "count", 1))) return NULL;
  __pyx_v_kwargs = (__pyx_kwds) ? <span class='py_c_api'>PyDict_Copy</span>(__pyx_kwds) : <span class='py_c_api'>PyDict_New</span>();
  if (unlikely(!__pyx_v_kwargs)) return NULL;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_v_kwargs);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_args);
  __pyx_v_args = __pyx_args;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line339")'> 339:         kwargs['count'] = True</pre>
<pre id='line339' class='code' style='background-color: #FFFF79'>
    __pyx_t_1 = __Pyx_<span class='py_c_api'>PyBool_FromLong</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 339; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  if (<span class='py_c_api'>PyObject_SetItem</span>(__pyx_v_kwargs, ((PyObject *)__pyx_n_s__count), __pyx_t_1) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 339; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF44' onclick='toggleDiv("line340")'> 340:         return self.select(*args, **kwargs)</pre>
<pre id='line340' class='code' style='background-color: #FFFF44'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s__select);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 340; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PySequence_Tuple</span>(__pyx_v_args);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 340; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_2));
  __pyx_t_3 = <span class='py_c_api'>PyEval_CallObjectWithKeywords</span>(__pyx_t_1, ((PyObject *)__pyx_t_2), __pyx_v_kwargs);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 340; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_2)); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.count");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_args);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwargs);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line341")'> 341: </pre>
<pre id='line341' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF6a' onclick='toggleDiv("line342")'> 342:     def delete(self, *args, **kwargs):</pre>
<pre id='line342' class='code' style='background-color: #FFFF6a'>
static PyObject *__pyx_pf_8ctctable_7TCTable_delete(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable_delete(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_args = 0;
  PyObject *__pyx_v_kwargs = 0;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("delete");
  if (unlikely(__pyx_kwds) && unlikely(!<span class='pyx_c_api'>__Pyx_CheckKeywordStrings</span>(__pyx_kwds, "delete", 1))) return NULL;
  __pyx_v_kwargs = (__pyx_kwds) ? <span class='py_c_api'>PyDict_Copy</span>(__pyx_kwds) : <span class='py_c_api'>PyDict_New</span>();
  if (unlikely(!__pyx_v_kwargs)) return NULL;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_v_kwargs);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_args);
  __pyx_v_args = __pyx_args;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line343")'> 343:         kwargs['delete'] = True</pre>
<pre id='line343' class='code' style='background-color: #FFFF79'>
    __pyx_t_1 = __Pyx_<span class='py_c_api'>PyBool_FromLong</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 343; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  if (<span class='py_c_api'>PyObject_SetItem</span>(__pyx_v_kwargs, ((PyObject *)__pyx_n_s__delete), __pyx_t_1) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 343; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF44' onclick='toggleDiv("line344")'> 344:         return self.select(*args, **kwargs)</pre>
<pre id='line344' class='code' style='background-color: #FFFF44'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s__select);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 344; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PySequence_Tuple</span>(__pyx_v_args);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 344; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_2));
  __pyx_t_3 = <span class='py_c_api'>PyEval_CallObjectWithKeywords</span>(__pyx_t_1, ((PyObject *)__pyx_t_2), __pyx_v_kwargs);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 344; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_2)); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.delete");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_args);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwargs);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line345")'> 345: </pre>
<pre id='line345' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF32' onclick='toggleDiv("line346")'> 346:     def select(self, *args, bint values_only=False, **kwargs):</pre>
<pre id='line346' class='code' style='background-color: #FFFF32'>
static PyObject *__pyx_pf_8ctctable_7TCTable_select(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_pf_8ctctable_7TCTable_select(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_values_only;
  PyObject *__pyx_v_args = 0;
  PyObject *__pyx_v_kwargs = 0;
  struct __pyx_obj_8ctctable_TCQuery *__pyx_v_q = 0;
  TCLIST *__pyx_v_tclist;
  PyObject *__pyx_v_li = 0;
  int __pyx_v_count;
  PyObject *__pyx_v_kwskip;
  PyObject *__pyx_v_colname;
  PyObject *__pyx_v_other;
  PyObject *__pyx_v_col;
  PyObject *__pyx_r = NULL;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__values_only,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("select");
  __pyx_v_kwargs = <span class='py_c_api'>PyDict_New</span>(); if (unlikely(!__pyx_v_kwargs)) return NULL;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_v_kwargs);
  if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) > 0) {
    __pyx_v_args = <span class='py_c_api'>PyTuple_GetSlice</span>(__pyx_args, 0, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_v_args);

    if (unlikely(!__pyx_v_args)) {
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwargs);
      return NULL;
    }
  } else {
    __pyx_v_args = __pyx_empty_tuple; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_empty_tuple);
  }
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[1] = {0};
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      default:
      case  0: break;
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, __pyx_v_kwargs, values, 0, "select") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 346; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    if (values[0]) {
      __pyx_v_values_only = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(values[0]);<span class='error_goto'> if (unlikely((__pyx_v_values_only == (int)-1))) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 346; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    } else {
      __pyx_v_values_only = ((int)0);
    }
  } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) < 0) {
    goto __pyx_L5_argtuple_error;
  } else {
    __pyx_v_values_only = ((int)0);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("select", 0, 0, 0, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 346; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_args);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwargs);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.select");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  __pyx_v_kwskip = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_v_colname = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_v_other = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_v_col = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line347")'> 347:         # cool. mixing *args and a single kwarg with kwargs</pre>
<pre id='line347' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line348")'> 348:         # not allowed in python 2.XX</pre>
<pre id='line348' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line349")'> 349: </pre>
<pre id='line349' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line350")'> 350:         cdef TCQuery q = make_query(self._state)</pre>
<pre id='line350' class='code' style='background-color: #FFFFff'>
    __pyx_t_1 = ((PyObject *)__pyx_f_8ctctable_make_query(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->_state));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 350; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_v_q = ((struct __pyx_obj_8ctctable_TCQuery *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line351")'> 351:         #cdef TDBQRY* query_state = tctdbqrynew(self._state)</pre>
<pre id='line351' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line352")'> 352:         cdef TCLIST *tclist</pre>
<pre id='line352' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line353")'> 353:         cdef list li = []</pre>
<pre id='line353' class='code' style='background-color: #FFFFaa'>
    __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 353; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));
  __pyx_v_li = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line354")'> 354:         cdef int count</pre>
<pre id='line354' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line355")'> 355:         cdef int i</pre>
<pre id='line355' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line356")'> 356: </pre>
<pre id='line356' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF5b' onclick='toggleDiv("line357")'> 357:         kwskip = ('delete', 'order', 'count', 'limit', 'offset', 'values_only')</pre>
<pre id='line357' class='code' style='background-color: #FFFF5b'>
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 357; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__delete));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_n_s__delete));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_n_s__delete));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__order));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, ((PyObject *)__pyx_n_s__order));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_n_s__order));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__count));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 2, ((PyObject *)__pyx_n_s__count));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_n_s__count));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__limit));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 3, ((PyObject *)__pyx_n_s__limit));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_n_s__limit));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__offset));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 4, ((PyObject *)__pyx_n_s__offset));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_n_s__offset));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_n_s__values_only));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 5, ((PyObject *)__pyx_n_s__values_only));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_n_s__values_only));
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwskip);
  __pyx_v_kwskip = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line358")'> 358: </pre>
<pre id='line358' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line359")'> 359:         # tbl.select(name='fred', age=22)</pre>
<pre id='line359' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line360")'> 360:         # convert age=22 to Col('age') == 22</pre>
<pre id='line360' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF6a' onclick='toggleDiv("line361")'> 361:         args = list(args)</pre>
<pre id='line361' class='code' style='background-color: #FFFF6a'>
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 361; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_args);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_v_args);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_args);
  __pyx_t_2 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyList_Type)), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 361; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_args);
  __pyx_v_args = __pyx_t_2;
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF1b' onclick='toggleDiv("line362")'> 362:         for colname, other in kwargs.items():</pre>
<pre id='line362' class='code' style='background-color: #FFFF1b'>
    __pyx_t_2 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_kwargs, __pyx_n_s__items);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_t_1 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_2, ((PyObject *)__pyx_empty_tuple), NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_1) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_1)) {
    __pyx_t_3 = 0; __pyx_t_2 = __pyx_t_1; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  for (;;) {
    if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_2))) {
      if (__pyx_t_3 >= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_2)) break;
      __pyx_t_1 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_2, __pyx_t_3); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1); __pyx_t_3++;
    } else if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_2))) {
      if (__pyx_t_3 >= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_2)) break;
      __pyx_t_1 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_2, __pyx_t_3); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1); __pyx_t_3++;
    } else {
      __pyx_t_1 = <span class='py_c_api'>PyIter_Next</span>(__pyx_t_2);
      if (!__pyx_t_1) {
        if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>()))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        break;
      }
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    }
    if (<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_1) && likely(<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_1) == 2)) {
      PyObject* tuple = __pyx_t_1;
      __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(tuple, 0); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(tuple, 1); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_colname);
      __pyx_v_colname = __pyx_t_4;
      __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_other);
      __pyx_v_other = __pyx_t_5;
      __pyx_t_5 = 0;
    } else {
      __pyx_t_6 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_UnpackItem</span>(__pyx_t_6, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_UnpackItem</span>(__pyx_t_6, 1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
      if (<span class='pyx_c_api'>__Pyx_EndUnpack</span>(__pyx_t_6) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_colname);
      __pyx_v_colname = __pyx_t_4;
      __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_other);
      __pyx_v_other = __pyx_t_5;
      __pyx_t_5 = 0;
    }
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line363")'> 363:             if colname in kwskip: continue</pre>
<pre id='line363' class='code' style='background-color: #FFFFaa'>
        __pyx_t_7 = ((<span class='py_c_api'>PySequence_Contains</span>(__pyx_v_kwskip, __pyx_v_colname)));<span class='error_goto'> if (unlikely(__pyx_t_7 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 363; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    if (__pyx_t_7) {
      goto __pyx_L6_continue;
      goto __pyx_L8;
    }
    __pyx_L8:;
</pre><pre class='line' style='background-color: #FFFF44' onclick='toggleDiv("line364")'> 364:             args.append(Col(colname) == other)</pre>
<pre id='line364' class='code' style='background-color: #FFFF44'>
        __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 364; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_colname);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_v_colname);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_colname);
    __pyx_t_5 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)__pyx_ptype_8ctctable_Col)), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 364; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_5, __pyx_v_other, Py_EQ);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 364; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = __Pyx_<span class='py_c_api'>PyObject_Append</span>(__pyx_v_args, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 364; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_L6_continue:;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line365")'> 365: </pre>
<pre id='line365' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF30' onclick='toggleDiv("line366")'> 366:         for col in args:</pre>
<pre id='line366' class='code' style='background-color: #FFFF30'>
    if (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_v_args) || <span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_v_args)) {
    __pyx_t_3 = 0; __pyx_t_2 = __pyx_v_args; <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
  } else {
    __pyx_t_3 = -1; __pyx_t_2 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_v_args);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 366; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  }
  for (;;) {
    if (likely(<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_2))) {
      if (__pyx_t_3 >= <span class='py_macro_api'>PyList_GET_SIZE</span>(__pyx_t_2)) break;
      __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_t_2, __pyx_t_3); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_3++;
    } else if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_2))) {
      if (__pyx_t_3 >= <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_t_2)) break;
      __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_t_2, __pyx_t_3); <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5); __pyx_t_3++;
    } else {
      __pyx_t_5 = <span class='py_c_api'>PyIter_Next</span>(__pyx_t_2);
      if (!__pyx_t_5) {
        if (unlikely(<span class='py_c_api'>PyErr_Occurred</span>()))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 366; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        break;
      }
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_col);
    __pyx_v_col = __pyx_t_5;
    __pyx_t_5 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line367")'> 367:             # separate these out rather than |'ing here because</pre>
<pre id='line367' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line368")'> 368:             # they may reuse the Col object.</pre>
<pre id='line368' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line369")'> 369:             if col.invert:</pre>
<pre id='line369' class='code' style='background-color: #FFFF79'>
        __pyx_t_5 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_col, __pyx_n_s__invert);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 369; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
    __pyx_t_7 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(__pyx_t_7 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 369; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    if (__pyx_t_7) {
</pre><pre class='line' style='background-color: #FFFF62' onclick='toggleDiv("line370")'> 370:                 tctdbqryaddcond(q._state, &lt;char *&gt;col.colname,</pre>
<pre id='line370' class='code' style='background-color: #FFFF62'>
            __pyx_t_5 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_col, __pyx_n_s__colname);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 370; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
      __pyx_t_8 = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(__pyx_t_5);<span class='error_goto'> if (unlikely((!__pyx_t_8) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 370; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
</pre><pre class='line' style='background-color: #FFFF34' onclick='toggleDiv("line371")'> 371:                                 &lt;int&gt;(col.op | TDBQCNEGATE), &lt;char *&gt;col.other)</pre>
<pre id='line371' class='code' style='background-color: #FFFF34'>
            __pyx_t_5 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_col, __pyx_n_s__op);<span class='error_goto'> if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 371; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_5);
      __pyx_t_1 = <span class='py_c_api'>PyInt_FromLong</span>(TDBQCNEGATE);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 371; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
      __pyx_t_4 = PyNumber_Or(__pyx_t_5, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 371; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_9 = __Pyx_<span class='py_c_api'>PyInt_AsInt</span>(__pyx_t_4);<span class='error_goto'> if (unlikely((__pyx_t_9 == (int)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 371; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_col, __pyx_n_s__other);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 371; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      __pyx_t_10 = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(__pyx_t_4);<span class='error_goto'> if (unlikely((!__pyx_t_10) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 371; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      tctdbqryaddcond(__pyx_v_q->_state, ((char *)__pyx_t_8), ((int)__pyx_t_9), ((char *)__pyx_t_10));
      goto __pyx_L11;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line372")'> 372:             else:</pre>
<pre id='line372' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF3c' onclick='toggleDiv("line373")'> 373:                 tctdbqryaddcond(q._state, &lt;char *&gt;col.colname, &lt;int&gt;col.op,</pre>
<pre id='line373' class='code' style='background-color: #FFFF3c'>
            __pyx_t_4 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_col, __pyx_n_s__colname);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 373; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      __pyx_t_10 = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(__pyx_t_4);<span class='error_goto'> if (unlikely((!__pyx_t_10) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 373; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_col, __pyx_n_s__op);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 373; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      __pyx_t_9 = __Pyx_<span class='py_c_api'>PyInt_AsInt</span>(__pyx_t_4);<span class='error_goto'> if (unlikely((__pyx_t_9 == (int)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 373; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
</pre><pre class='line' style='background-color: #FFFF5e' onclick='toggleDiv("line374")'> 374:                                 &lt;char *&gt;col.other)</pre>
<pre id='line374' class='code' style='background-color: #FFFF5e'>
            __pyx_t_4 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_col, __pyx_n_s__other);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 374; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      __pyx_t_8 = __Pyx_<span class='py_c_api'>PyBytes_AsString</span>(__pyx_t_4);<span class='error_goto'> if (unlikely((!__pyx_t_8) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 374; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      tctdbqryaddcond(__pyx_v_q->_state, ((char *)__pyx_t_10), ((int)__pyx_t_9), ((char *)__pyx_t_8));
    }
    __pyx_L11:;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line375")'> 375: </pre>
<pre id='line375' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line376")'> 376:         self._set_limit(q._state, kwargs)</pre>
<pre id='line376' class='code' style='background-color: #FFFF7f'>
    if (!(likely(<span class='py_c_api'>PyDict_CheckExact</span>(__pyx_v_kwargs))||((__pyx_v_kwargs) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected dict, got %.200s", Py_TYPE(__pyx_v_kwargs)->tp_name), 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 376; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_set_limit(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_q->_state, ((PyObject *)__pyx_v_kwargs));
</pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line377")'> 377:         self._set_order(q._state, kwargs)</pre>
<pre id='line377' class='code' style='background-color: #FFFF7f'>
    if (!(likely(<span class='py_c_api'>PyDict_CheckExact</span>(__pyx_v_kwargs))||((__pyx_v_kwargs) == Py_None)||(<span class='py_c_api'>PyErr_Format</span>(PyExc_TypeError, "Expected dict, got %.200s", Py_TYPE(__pyx_v_kwargs)->tp_name), 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 377; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  ((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_set_order(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_q->_state, ((PyObject *)__pyx_v_kwargs));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line378")'> 378: </pre>
<pre id='line378' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line379")'> 379:         if 'delete' in kwargs:</pre>
<pre id='line379' class='code' style='background-color: #FFFFaa'>
    __pyx_t_7 = ((<span class='py_c_api'>PySequence_Contains</span>(__pyx_v_kwargs, ((PyObject *)__pyx_n_s__delete))));<span class='error_goto'> if (unlikely(__pyx_t_7 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 379; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (__pyx_t_7) {
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line380")'> 380:             return tctdbqrysearchout(q._state)</pre>
<pre id='line380' class='code' style='background-color: #FFFF9f'>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_t_2 = __Pyx_<span class='py_c_api'>PyBool_FromLong</span>(tctdbqrysearchout(__pyx_v_q->_state));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 380; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    __pyx_r = __pyx_t_2;
    __pyx_t_2 = 0;
    goto __pyx_L0;
    goto __pyx_L12;
  }
  __pyx_L12:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line381")'> 381: </pre>
<pre id='line381' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line382")'> 382:         tclist = tctdbqrysearch(q._state)</pre>
<pre id='line382' class='code' style='background-color: #FFFFff'>
    __pyx_v_tclist = tctdbqrysearch(__pyx_v_q->_state);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line383")'> 383:         # number of elements in the list</pre>
<pre id='line383' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line384")'> 384:         count = tclistnum(tclist)</pre>
<pre id='line384' class='code' style='background-color: #FFFFff'>
    __pyx_v_count = tclistnum(__pyx_v_tclist);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line385")'> 385: </pre>
<pre id='line385' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line386")'> 386:         if 'count' in kwargs:</pre>
<pre id='line386' class='code' style='background-color: #FFFFaa'>
    __pyx_t_7 = ((<span class='py_c_api'>PySequence_Contains</span>(__pyx_v_kwargs, ((PyObject *)__pyx_n_s__count))));<span class='error_goto'> if (unlikely(__pyx_t_7 < 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 386; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (__pyx_t_7) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line387")'> 387:             tclistdel(tclist)</pre>
<pre id='line387' class='code' style='background-color: #FFFFff'>
        tclistdel(__pyx_v_tclist);
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line388")'> 388:             return count</pre>
<pre id='line388' class='code' style='background-color: #FFFF9f'>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(__pyx_v_count);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 388; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    __pyx_r = __pyx_t_2;
    __pyx_t_2 = 0;
    goto __pyx_L0;
    goto __pyx_L13;
  }
  __pyx_L13:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line389")'> 389: </pre>
<pre id='line389' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line390")'> 390:         li = self._tclist_to_list(tclist, count, values_only)</pre>
<pre id='line390' class='code' style='background-color: #FFFFe7'>
    __pyx_t_2 = ((PyObject *)((struct __pyx_vtabstruct_8ctctable_TCTable *)((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self)->__pyx_vtab)->_tclist_to_list(((struct __pyx_obj_8ctctable_TCTable *)__pyx_v_self), __pyx_v_tclist, __pyx_v_count, __pyx_v_values_only));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 390; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_li));
  __pyx_v_li = ((PyObject *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line391")'> 391:         tclistdel(tclist)</pre>
<pre id='line391' class='code' style='background-color: #FFFFff'>
    tclistdel(__pyx_v_tclist);
</pre><pre class='line' style='background-color: #FFFF55' onclick='toggleDiv("line392")'> 392:         return li</pre>
<pre id='line392' class='code' style='background-color: #FFFF55'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_li));
  __pyx_r = ((PyObject *)__pyx_v_li);
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable.select");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_args);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwargs);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_q);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_li);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_kwskip);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_colname);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_other);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_col);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line393")'> 393: </pre>
<pre id='line393' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line394")'> 394:     cdef list _tclist_to_list(TCTable self, TCLIST *tclist, int count,</pre>
<pre id='line394' class='code' style='background-color: #FFFFb6'>
static  PyObject *__pyx_f_8ctctable_7TCTable__tclist_to_list(struct __pyx_obj_8ctctable_TCTable *__pyx_v_self, TCLIST *__pyx_v_tclist, int __pyx_v_count, int __pyx_v_values_only) {
  PyObject *__pyx_v_li = 0;
  char *__pyx_v_kbuf;
  int __pyx_v_ksiz;
  int __pyx_v_i;
  PyObject *__pyx_v_d;
  PyObject *__pyx_v_key;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("_tclist_to_list");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  __pyx_v_d = ((PyObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_v_key = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line395")'> 395:                               bint values_only):</pre>
<pre id='line395' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line396")'> 396:         # INTERNAL: the calling function is still responsible for deleting</pre>
<pre id='line396' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line397")'> 397:         # tclist.</pre>
<pre id='line397' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line398")'> 398:         cdef list li = []</pre>
<pre id='line398' class='code' style='background-color: #FFFFaa'>
    __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 398; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));
  __pyx_v_li = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line399")'> 399:         cdef char *kbuf</pre>
<pre id='line399' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line400")'> 400:         cdef int ksiz, i</pre>
<pre id='line400' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line401")'> 401:         cdef dict d</pre>
<pre id='line401' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line402")'> 402:         for i in range(count):</pre>
<pre id='line402' class='code' style='background-color: #FFFFff'>
    __pyx_t_2 = __pyx_v_count;
  for (__pyx_t_3 = 0; __pyx_t_3 < __pyx_t_2; __pyx_t_3+=1) {
    __pyx_v_i = __pyx_t_3;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line403")'> 403:             kbuf = &lt;char *&gt;tclistval(tclist, i, &amp;ksiz)</pre>
<pre id='line403' class='code' style='background-color: #FFFFff'>
        __pyx_v_kbuf = ((char *)tclistval(__pyx_v_tclist, __pyx_v_i, (&__pyx_v_ksiz)));
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line404")'> 404:             d = self._ckey_to_dict(kbuf, ksiz)</pre>
<pre id='line404' class='code' style='background-color: #FFFFe7'>
        __pyx_t_1 = ((PyObject *)((struct __pyx_vtabstruct_8ctctable_TCTable *)__pyx_v_self->__pyx_vtab)->_ckey_to_dict(__pyx_v_self, __pyx_v_kbuf, __pyx_v_ksiz));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 404; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_v_d));
    __pyx_v_d = ((PyObject *)__pyx_t_1);
    __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line405")'> 405:             if values_only:</pre>
<pre id='line405' class='code' style='background-color: #FFFFff'>
        __pyx_t_4 = __pyx_v_values_only;
    if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFF66' onclick='toggleDiv("line406")'> 406:                 li.append(d)</pre>
<pre id='line406' class='code' style='background-color: #FFFF66'>
            if (unlikely(__pyx_v_li == Py_None)) {
        <span class='py_c_api'>PyErr_SetString</span>(PyExc_AttributeError, "'NoneType' object has no attribute 'append'");<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 406; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span> 
      }
      __pyx_t_5 = <span class='py_c_api'>PyList_Append</span>(((PyObject *)__pyx_v_li), ((PyObject *)__pyx_v_d));<span class='error_goto'> if (unlikely(__pyx_t_5 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 406; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      goto __pyx_L5;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line407")'> 407:             else:</pre>
<pre id='line407' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line408")'> 408:                 key = ps.PyString_FromStringAndSize(kbuf, &lt;Py_ssize_t&gt;ksiz)</pre>
<pre id='line408' class='code' style='background-color: #FFFF79'>
            __pyx_t_1 = <span class='py_c_api'>PyString_FromStringAndSize</span>(__pyx_v_kbuf, ((Py_ssize_t)__pyx_v_ksiz));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 408; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_key);
      __pyx_v_key = __pyx_t_1;
      __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF48' onclick='toggleDiv("line409")'> 409:                 li.append((key, d))</pre>
<pre id='line409' class='code' style='background-color: #FFFF48'>
            if (unlikely(__pyx_v_li == Py_None)) {
        <span class='py_c_api'>PyErr_SetString</span>(PyExc_AttributeError, "'NoneType' object has no attribute 'append'");<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 409; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span> 
      }
      __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 409; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_key);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_v_key);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_key);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_d));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, ((PyObject *)__pyx_v_d));
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_v_d));
      __pyx_t_5 = <span class='py_c_api'>PyList_Append</span>(((PyObject *)__pyx_v_li), __pyx_t_1);<span class='error_goto'> if (unlikely(__pyx_t_5 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 409; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    }
    __pyx_L5:;
  }
</pre><pre class='line' style='background-color: #FFFF62' onclick='toggleDiv("line410")'> 410:         return li</pre>
<pre id='line410' class='code' style='background-color: #FFFF62'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_li));
  __pyx_r = __pyx_v_li;
  goto __pyx_L0;

  __pyx_r = ((PyObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.TCTable._tclist_to_list");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_li);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_d);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_key);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line411")'> 411: </pre>
<pre id='line411' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line412")'> 412: cdef class Col(object):</pre>
<pre id='line412' class='code' style='background-color: #FFFFff'>
struct __pyx_obj_8ctctable_Col {
  PyObject_HEAD
  PyObject *colname;
  int op;
  PyObject *other;
  PyObject *num_lookups;
  int invert;
};
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line413")'> 413:     """</pre>
<pre id='line413' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line414")'> 414:     TODO:</pre>
<pre id='line414' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line415")'> 415:     tdb.query(Col('name') == 'Fred' &amp; Col('age') &gt; 22)</pre>
<pre id='line415' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line416")'> 416:         or</pre>
<pre id='line416' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line417")'> 417:     tdb.select(Q(name__in=['Fred', 'Wilma']), Q(name__contains="at2g"))</pre>
<pre id='line417' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line418")'> 418:     """</pre>
<pre id='line418' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line419")'> 419:     cdef readonly object colname</pre>
<pre id='line419' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line420")'> 420:     cdef public int op</pre>
<pre id='line420' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line421")'> 421:     cdef public object other</pre>
<pre id='line421' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line422")'> 422:     cdef readonly dict num_lookups</pre>
<pre id='line422' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line423")'> 423:     cdef readonly bint invert</pre>
<pre id='line423' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line424")'> 424: </pre>
<pre id='line424' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF4b' onclick='toggleDiv("line425")'> 425:     def __cinit__(self, colname):</pre>
<pre id='line425' class='code' style='background-color: #FFFF4b'>
static int __pyx_pf_8ctctable_3Col___cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_pf_8ctctable_3Col___cinit__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_colname = 0;
  int __pyx_r;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__colname,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__cinit__");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[1] = {0};
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__colname);
      if (likely(values[0])) kw_args--;
      else goto __pyx_L5_argtuple_error;
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "__cinit__") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 425; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    __pyx_v_colname = values[0];
  } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 1) {
    goto __pyx_L5_argtuple_error;
  } else {
    __pyx_v_colname = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("__cinit__", 1, 1, 1, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 425; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.Col.__cinit__");
  return -1;
  __pyx_L4_argument_unpacking_done:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line426")'> 426:         self.invert = False</pre>
<pre id='line426' class='code' style='background-color: #FFFFff'>
    ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->invert = 0;
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line427")'> 427:         self.num_lookups= {</pre>
<pre id='line427' class='code' style='background-color: #FFFF9f'>
    __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));

    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_t_1));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->num_lookups);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->num_lookups));
  ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->num_lookups = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line428")'> 428:                 0: TDBQCNUMLT, # &lt;</pre>
<pre id='line428' class='code' style='background-color: #FFFF79'>
    __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBQCNUMLT);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_int_0, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line429")'> 429:                 1: TDBQCNUMLE, # &lt;=</pre>
<pre id='line429' class='code' style='background-color: #FFFF79'>
    __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBQCNUMLE);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 429; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_int_1, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line430")'> 430:                 2: TDBQCNUMEQ, # ==</pre>
<pre id='line430' class='code' style='background-color: #FFFF79'>
    __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBQCNUMEQ);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 430; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_int_2, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line431")'> 431:                 3: TDBQCNUMEQ | TDBQCNEGATE, # !=. # TODO test.</pre>
<pre id='line431' class='code' style='background-color: #FFFF79'>
    __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>((TDBQCNUMEQ | TDBQCNEGATE));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 431; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_int_3, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line432")'> 432:                 4: TDBQCNUMGT, # &gt;</pre>
<pre id='line432' class='code' style='background-color: #FFFF79'>
    __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBQCNUMGT);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 432; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_int_4, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line433")'> 433:                 5: TDBQCNUMGE  # &gt;=</pre>
<pre id='line433' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line434")'> 434:             }</pre>
<pre id='line434' class='code' style='background-color: #FFFF79'>
    __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBQCNUMGE);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 434; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_int_5, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF96' onclick='toggleDiv("line435")'> 435:         self.colname = colname</pre>
<pre id='line435' class='code' style='background-color: #FFFF96'>
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_colname);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_colname);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->colname);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->colname);
  ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->colname = __pyx_v_colname;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.Col.__cinit__");
  __pyx_r = -1;
  __pyx_L0:;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line436")'> 436:     """</pre>
<pre id='line436' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line437")'> 437:     void tctdbqryaddcond(TDBQRY *qry, const char *name, int op, const char *expr);</pre>
<pre id='line437' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line438")'> 438:     `qry' specifies the query object.</pre>
<pre id='line438' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line439")'> 439:     `name' specifies the name of a column. An empty string means the primary key.</pre>
<pre id='line439' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line440")'> 440:     `op' specifies an operation type:</pre>
<pre id='line440' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line441")'> 441:     # the below are unimplemented.</pre>
<pre id='line441' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line442")'> 442:     `TDBQCSTRAND' for string which includes all tokens in the expression,</pre>
<pre id='line442' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line443")'> 443:     `TDBQCSTROR' for string which includes at least one token in the expression,</pre>
<pre id='line443' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line444")'> 444:     `TDBQCFTSPH' for full-text search with the phrase of the expression,</pre>
<pre id='line444' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line445")'> 445:     `TDBQCFTSAND' for full-text search with all tokens in the expression,</pre>
<pre id='line445' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line446")'> 446:     `TDBQCFTSOR' for full-text search with at least one token in the expression,</pre>
<pre id='line446' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line447")'> 447:     `TDBQCFTSEX' for full-text search with the compound expression.</pre>
<pre id='line447' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line448")'> 448:     """</pre>
<pre id='line448' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line449")'> 449:     # http://docs.cython.org/docs/special_methods.html</pre>
<pre id='line449' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line450")'> 450:     # &lt; 0 | &lt;= 1 | == 2 | != 3 |  &gt; 4 | &gt;= 5</pre>
<pre id='line450' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line451")'> 451:     def __richcmp__(self, other, op):</pre>
<pre id='line451' class='code' style='background-color: #FFFF79'>
static PyObject *__pyx_pf_8ctctable_3Col___richcmp__(PyObject *__pyx_v_self, PyObject *__pyx_v_other, int __pyx_arg_op); /*proto*/
static PyObject *__pyx_pf_8ctctable_3Col___richcmp__(PyObject *__pyx_v_self, PyObject *__pyx_v_other, int __pyx_arg_op) {
  PyObject *__pyx_v_op = 0;
  PyObject *__pyx_v_str_lookups;
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__richcmp__");
  __pyx_v_op = <span class='py_c_api'>PyInt_FromLong</span>(__pyx_arg_op);<span class='error_goto'> if (unlikely(!__pyx_v_op)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 451; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_v_op);
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.Col.__richcmp__");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
  __pyx_v_str_lookups = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
</pre><pre class='line' style='background-color: #FFFF57' onclick='toggleDiv("line452")'> 452:         self.other = unicode(other)</pre>
<pre id='line452' class='code' style='background-color: #FFFF57'>
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 452; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_v_other);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_other);
  __pyx_t_2 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyUnicode_Type)), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 452; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_v_self, __pyx_n_s__other, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 452; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF5e' onclick='toggleDiv("line453")'> 453:         if isinstance(other, (int, long, float)):</pre>
<pre id='line453' class='code' style='background-color: #FFFF5e'>
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 453; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)&PyInt_Type)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)((PyObject*)&PyInt_Type)));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)((PyObject*)&PyInt_Type)));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)&PyLong_Type)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, ((PyObject *)((PyObject*)&PyLong_Type)));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)((PyObject*)&PyLong_Type)));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)&PyFloat_Type)));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2, ((PyObject *)((PyObject*)&PyFloat_Type)));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)((PyObject*)&PyFloat_Type)));
  __pyx_t_3 = <span class='py_c_api'>PyObject_IsInstance</span>(__pyx_v_other, __pyx_t_2);<span class='error_goto'> if (unlikely(__pyx_t_3 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 453; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (__pyx_t_3) {
</pre><pre class='line' style='background-color: #FFFF5e' onclick='toggleDiv("line454")'> 454:             self.op = self.num_lookups[op]</pre>
<pre id='line454' class='code' style='background-color: #FFFF5e'>
        __pyx_t_2 = <span class='py_c_api'>PyObject_GetAttr</span>(__pyx_v_self, __pyx_n_s__num_lookups);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 454; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_t_2, __pyx_v_op);<span class='error_goto'> if (!__pyx_t_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 454; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_v_self, __pyx_n_s__op, __pyx_t_1) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 454; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    goto __pyx_L5;
  }
  /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line455")'> 455:         else:</pre>
<pre id='line455' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line456")'> 456:             str_lookups= {</pre>
<pre id='line456' class='code' style='background-color: #FFFFaa'>
        __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 456; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line457")'> 457:                 2: TDBQCSTREQ, # ==</pre>
<pre id='line457' class='code' style='background-color: #FFFF79'>
        __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>(TDBQCSTREQ);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 457; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_int_2, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 456; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line458")'> 458:                 3: TDBQCSTREQ | TDBQCNEGATE # not equal.</pre>
<pre id='line458' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF73' onclick='toggleDiv("line459")'> 459:             }</pre>
<pre id='line459' class='code' style='background-color: #FFFF73'>
        __pyx_t_2 = <span class='py_c_api'>PyInt_FromLong</span>((TDBQCSTREQ | TDBQCNEGATE));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 458; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_int_3, __pyx_t_2) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 456; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_str_lookups);
    __pyx_v_str_lookups = ((PyObject *)__pyx_t_1);
    __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line460")'> 460:             self.op = str_lookups[op]</pre>
<pre id='line460' class='code' style='background-color: #FFFF79'>
        __pyx_t_1 = <span class='py_c_api'>PyObject_GetItem</span>(__pyx_v_str_lookups, __pyx_v_op);<span class='error_goto'> if (!__pyx_t_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 460; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
    if (<span class='py_c_api'>PyObject_SetAttr</span>(__pyx_v_self, __pyx_n_s__op, __pyx_t_1) < 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 460; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
  __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFF73' onclick='toggleDiv("line461")'> 461:         return self</pre>
<pre id='line461' class='code' style='background-color: #FFFF73'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.Col.__richcmp__");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_op);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_str_lookups);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_other);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line462")'> 462: </pre>
<pre id='line462' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line463")'> 463:     def __invert__(self):</pre>
<pre id='line463' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_3Col___invert__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_pf_8ctctable_3Col___invert__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__invert__");
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line464")'> 464:         # ~Col('age') == 180</pre>
<pre id='line464' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line465")'> 465:         self.invert = not self.invert</pre>
<pre id='line465' class='code' style='background-color: #FFFFff'>
    ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->invert = (!((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->invert);
</pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line466")'> 466:         return self</pre>
<pre id='line466' class='code' style='background-color: #FFFFb6'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line467")'> 467: </pre>
<pre id='line467' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line468")'> 468:     def matches(self, pattern):</pre>
<pre id='line468' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_3Col_matches(PyObject *__pyx_v_self, PyObject *__pyx_v_pattern); /*proto*/
static PyObject *__pyx_pf_8ctctable_3Col_matches(PyObject *__pyx_v_self, PyObject *__pyx_v_pattern) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("matches");
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line469")'> 469:         self.op = TDBQCSTRRX</pre>
<pre id='line469' class='code' style='background-color: #FFFFff'>
    ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->op = TDBQCSTRRX;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line470")'> 470:         self.other = pattern</pre>
<pre id='line470' class='code' style='background-color: #FFFFd4'>
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_pattern);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_pattern);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other = __pyx_v_pattern;
</pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line471")'> 471:         return self</pre>
<pre id='line471' class='code' style='background-color: #FFFFb6'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line472")'> 472: </pre>
<pre id='line472' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line473")'> 473:     def contains(self, other):</pre>
<pre id='line473' class='code' style='background-color: #FFFFc4'>
static PyObject *__pyx_pf_8ctctable_3Col_contains(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
static char __pyx_doc_8ctctable_3Col_contains[] = "\n        if other is a list and any is True\n        it will return all cases where the column is\n        one of those values. if any is False, it will return\n        only columns that match all the values in the list.\n        ";
static PyObject *__pyx_pf_8ctctable_3Col_contains(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("contains");
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line474")'> 474:         """</pre>
<pre id='line474' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line475")'> 475:         if other is a list and any is True</pre>
<pre id='line475' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line476")'> 476:         it will return all cases where the column is</pre>
<pre id='line476' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line477")'> 477:         one of those values. if any is False, it will return</pre>
<pre id='line477' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line478")'> 478:         only columns that match all the values in the list.</pre>
<pre id='line478' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line479")'> 479:         """</pre>
<pre id='line479' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line480")'> 480: </pre>
<pre id='line480' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line481")'> 481:         if hasattr(other, '__iter__'):</pre>
<pre id='line481' class='code' style='background-color: #FFFFaa'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_HasAttr</span>(__pyx_v_other, ((PyObject *)__pyx_n_s____iter__));<span class='error_goto'> if (unlikely(__pyx_t_1 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 481; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFF6a' onclick='toggleDiv("line482")'> 482:             other = list(other)</pre>
<pre id='line482' class='code' style='background-color: #FFFF6a'>
        __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 482; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_v_other);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_other);
    __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyList_Type)), __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 482; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_other);
    __pyx_v_other = __pyx_t_3;
    __pyx_t_3 = 0;
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line483")'> 483:             if isinstance(other[0], basestring):</pre>
<pre id='line483' class='code' style='background-color: #FFFF8d'>
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_other, 0, sizeof(long), PyInt_FromLong);<span class='error_goto'> if (!__pyx_t_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 483; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
    __pyx_t_1 = <span class='py_c_api'>PyObject_IsInstance</span>(__pyx_t_3, __pyx_builtin_basestring);<span class='error_goto'> if (unlikely(__pyx_t_1 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 483; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line484")'> 484:                 self.op = TDBQCSTROREQ # TDBQCSTRAND</pre>
<pre id='line484' class='code' style='background-color: #FFFFff'>
            ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->op = TDBQCSTROREQ;
</pre><pre class='line' style='background-color: #FFFF55' onclick='toggleDiv("line485")'> 485:                 self.other  = ' '.join(other)</pre>
<pre id='line485' class='code' style='background-color: #FFFF55'>
            __pyx_t_3 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_16), __pyx_n_s__join);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_v_other);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_other);
      __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_3, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_4);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
      ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other = __pyx_t_4;
      __pyx_t_4 = 0;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line486")'> 486:                 return self</pre>
<pre id='line486' class='code' style='background-color: #FFFFd4'>
            <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
      __pyx_r = __pyx_v_self;
      goto __pyx_L0;
      goto __pyx_L6;
    }
    /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line487")'> 487:             else:</pre>
<pre id='line487' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line488")'> 488:                 self.op = TDBQCNUMOREQ</pre>
<pre id='line488' class='code' style='background-color: #FFFFff'>
            ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->op = TDBQCNUMOREQ;
</pre><pre class='line' style='background-color: #FFFF39' onclick='toggleDiv("line489")'> 489:                 self.other  = ' '.join(map(str, other))</pre>
<pre id='line489' class='code' style='background-color: #FFFF39'>
            __pyx_t_4 = <span class='py_c_api'>PyObject_GetAttr</span>(((PyObject *)__pyx_kp_s_16), __pyx_n_s__join);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)((PyObject*)&PyString_Type)));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)((PyObject*)&PyString_Type)));
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)((PyObject*)&PyString_Type)));
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_v_other);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_other);
      __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_builtin_map, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_3);
      __pyx_t_3 = 0;
      __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_4, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_3);
      <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
      ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other = __pyx_t_3;
      __pyx_t_3 = 0;
    }
    __pyx_L6:;
    goto __pyx_L5;
  }
  __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line490")'> 490: </pre>
<pre id='line490' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line491")'> 491: </pre>
<pre id='line491' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line492")'> 492:         if isinstance(other, basestring):</pre>
<pre id='line492' class='code' style='background-color: #FFFFaa'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_IsInstance</span>(__pyx_v_other, __pyx_builtin_basestring);<span class='error_goto'> if (unlikely(__pyx_t_1 == -1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 492; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (__pyx_t_1) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line493")'> 493:             # so see if the column contains string.</pre>
<pre id='line493' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line494")'> 494:             self.op = TDBQCSTRINC</pre>
<pre id='line494' class='code' style='background-color: #FFFFff'>
        ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->op = TDBQCSTRINC;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line495")'> 495:             self.other = other</pre>
<pre id='line495' class='code' style='background-color: #FFFFd4'>
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_other);
    <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
    ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other = __pyx_v_other;
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line496")'> 496:             return self</pre>
<pre id='line496' class='code' style='background-color: #FFFFd4'>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
    __pyx_r = __pyx_v_self;
    goto __pyx_L0;
    goto __pyx_L7;
  }
  __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line497")'> 497: </pre>
<pre id='line497' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line498")'> 498:         # it's a number. so extract columns with this value.</pre>
<pre id='line498' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF6a' onclick='toggleDiv("line499")'> 499:         self.other = unicode(self.other)</pre>
<pre id='line499' class='code' style='background-color: #FFFF6a'>
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 499; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  __pyx_t_2 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyUnicode_Type)), __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 499; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other = __pyx_t_2;
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF6e' onclick='toggleDiv("line500")'> 500:         self.op = self.num_lookups[2] # ==</pre>
<pre id='line500' class='code' style='background-color: #FFFF6e'>
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->num_lookups), 2, sizeof(long), PyInt_FromLong);<span class='error_goto'> if (!__pyx_t_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 500; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_t_5 = __Pyx_<span class='py_c_api'>PyInt_AsInt</span>(__pyx_t_2);<span class='error_goto'> if (unlikely((__pyx_t_5 == (int)-1) && <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 500; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->op = __pyx_t_5;
</pre><pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line501")'> 501:         return self</pre>
<pre id='line501' class='code' style='background-color: #FFFF79'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.Col.contains");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>((PyObject *)__pyx_v_self);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_v_other);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line502")'> 502: </pre>
<pre id='line502' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line503")'> 503: </pre>
<pre id='line503' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line504")'> 504:     def startswith(self, other):</pre>
<pre id='line504' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_3Col_startswith(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
static PyObject *__pyx_pf_8ctctable_3Col_startswith(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("startswith");
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line505")'> 505:         self.other = other</pre>
<pre id='line505' class='code' style='background-color: #FFFFd4'>
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_other);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other = __pyx_v_other;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line506")'> 506:         self.op = TDBQCSTRBW</pre>
<pre id='line506' class='code' style='background-color: #FFFFff'>
    ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->op = TDBQCSTRBW;
</pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line507")'> 507:         return self</pre>
<pre id='line507' class='code' style='background-color: #FFFFb6'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line508")'> 508: </pre>
<pre id='line508' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line509")'> 509:     def endswith(self, other):</pre>
<pre id='line509' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_3Col_endswith(PyObject *__pyx_v_self, PyObject *__pyx_v_other); /*proto*/
static PyObject *__pyx_pf_8ctctable_3Col_endswith(PyObject *__pyx_v_self, PyObject *__pyx_v_other) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("endswith");
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line510")'> 510:         self.other = other</pre>
<pre id='line510' class='code' style='background-color: #FFFFd4'>
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_other);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_other);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other = __pyx_v_other;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line511")'> 511:         self.op = TDBQCSTREW</pre>
<pre id='line511' class='code' style='background-color: #FFFFff'>
    ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->op = TDBQCSTREW;
</pre><pre class='line' style='background-color: #FFFFb6' onclick='toggleDiv("line512")'> 512:         return self</pre>
<pre id='line512' class='code' style='background-color: #FFFFb6'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line513")'> 513: </pre>
<pre id='line513' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF3b' onclick='toggleDiv("line514")'> 514:     def between(self, low, high):</pre>
<pre id='line514' class='code' style='background-color: #FFFF3b'>
static PyObject *__pyx_pf_8ctctable_3Col_between(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_pf_8ctctable_3Col_between(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_low = 0;
  PyObject *__pyx_v_high = 0;
  PyObject *__pyx_r = NULL;
  static PyObject **__pyx_pyargnames[] = {&__pyx_n_s__low,&__pyx_n_s__high,0};
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("between");
  if (unlikely(__pyx_kwds)) {
    Py_ssize_t kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
    PyObject* values[2] = {0,0};
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      case  0: break;
      default: goto __pyx_L5_argtuple_error;
    }
    switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
      case  0:
      values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__low);
      if (likely(values[0])) kw_args--;
      else goto __pyx_L5_argtuple_error;
      case  1:
      values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__high);
      if (likely(values[1])) kw_args--;
      else {
        <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("between", 1, 2, 2, 1);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 514; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    }
    if (unlikely(kw_args > 0)) {
      if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args), "between") < 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 514; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    }
    __pyx_v_low = values[0];
    __pyx_v_high = values[1];
  } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
    goto __pyx_L5_argtuple_error;
  } else {
    __pyx_v_low = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
    __pyx_v_high = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("between", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 514; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.Col.between");
  return NULL;
  __pyx_L4_argument_unpacking_done:;
</pre><pre class='line' style='background-color: #FFFF33' onclick='toggleDiv("line515")'> 515:         self.other = str(low) + ' ' + str(high)</pre>
<pre id='line515' class='code' style='background-color: #FFFF33'>
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 515; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_low);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_v_low);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_low);
  __pyx_t_2 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 515; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, ((PyObject *)__pyx_kp_s_16));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 515; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 515; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_high);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_v_high);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_high);
  __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)&PyString_Type)), __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 515; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_1, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 515; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other);
  ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->other = __pyx_t_2;
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line516")'> 516:         self.op = TDBQCNUMBT</pre>
<pre id='line516' class='code' style='background-color: #FFFFff'>
    ((struct __pyx_obj_8ctctable_Col *)__pyx_v_self)->op = TDBQCNUMBT;
</pre><pre class='line' style='background-color: #FFFF86' onclick='toggleDiv("line517")'> 517:         return self</pre>
<pre id='line517' class='code' style='background-color: #FFFF86'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.Col.between");
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line518")'> 518: </pre>
<pre id='line518' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line519")'> 519: </pre>
<pre id='line519' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line520")'> 520: cdef class TCMap(object):</pre>
<pre id='line520' class='code' style='background-color: #FFFFff'>
struct __pyx_obj_8ctctable_TCMap {
  PyObject_HEAD
  TCMAP *_state;
};
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line521")'> 521:     cdef TCMAP* _state</pre>
<pre id='line521' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line522")'> 522:     def __del__(self):</pre>
<pre id='line522' class='code' style='background-color: #FFFFe7'>
static PyObject *__pyx_pf_8ctctable_5TCMap___del__(PyObject *__pyx_v_self, PyObject *unused); /*proto*/
static PyObject *__pyx_pf_8ctctable_5TCMap___del__(PyObject *__pyx_v_self, PyObject *unused) {
  PyObject *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__del__");
</pre><pre class='line' style='background-color: #FFFFd4' onclick='toggleDiv("line523")'> 523:         tcmapdel(self._state)</pre>
<pre id='line523' class='code' style='background-color: #FFFFd4'>
    tcmapdel(((struct __pyx_obj_8ctctable_TCMap *)__pyx_v_self)->_state);

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line524")'> 524: </pre>
<pre id='line524' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFc4' onclick='toggleDiv("line525")'> 525: cdef TCMap make_tcmap():</pre>
<pre id='line525' class='code' style='background-color: #FFFFc4'>
static  struct __pyx_obj_8ctctable_TCMap *__pyx_f_8ctctable_make_tcmap(void) {
  struct __pyx_obj_8ctctable_TCMap *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("make_tcmap");

  __pyx_r = ((struct __pyx_obj_8ctctable_TCMap *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>((PyObject *)__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line526")'> 526:     pass</pre>
<pre id='line526' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line527")'> 527: </pre>
<pre id='line527' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line528")'> 528: # this class just useful as it cleans itself up.</pre>
<pre id='line528' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line529")'> 529: # would be nicer to have this for tcmap...</pre>
<pre id='line529' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line530")'> 530: cdef class TCQuery(object):</pre>
<pre id='line530' class='code' style='background-color: #FFFFff'>
struct __pyx_obj_8ctctable_TCQuery {
  PyObject_HEAD
  TDBQRY *_state;
};

</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line531")'> 531:     cdef TDBQRY* _state</pre>
<pre id='line531' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line532")'> 532:     def __dealloc__(self):</pre>
<pre id='line532' class='code' style='background-color: #FFFFe7'>
static void __pyx_pf_8ctctable_7TCQuery___dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_pf_8ctctable_7TCQuery___dealloc__(PyObject *__pyx_v_self) {
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__dealloc__");
</pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line533")'> 533:         tctdbqrydel(self._state)</pre>
<pre id='line533' class='code' style='background-color: #FFFFe7'>
    tctdbqrydel(((struct __pyx_obj_8ctctable_TCQuery *)__pyx_v_self)->_state);

  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line534")'> 534: </pre>
<pre id='line534' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFe7' onclick='toggleDiv("line535")'> 535: cdef TCQuery make_query(TCTDB* tctdb):</pre>
<pre id='line535' class='code' style='background-color: #FFFFe7'>
static  struct __pyx_obj_8ctctable_TCQuery *__pyx_f_8ctctable_make_query(TCTDB *__pyx_v_tctdb) {
  struct __pyx_obj_8ctctable_TCQuery *__pyx_v_query = 0;
  struct __pyx_obj_8ctctable_TCQuery *__pyx_r = NULL;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("make_query");
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line536")'> 536:     cdef TCQuery query = TCQuery()</pre>
<pre id='line536' class='code' style='background-color: #FFFFaa'>
    __pyx_t_1 = <span class='py_c_api'>PyObject_Call</span>(((PyObject *)((PyObject*)__pyx_ptype_8ctctable_TCQuery)), ((PyObject *)__pyx_empty_tuple), NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 536; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_v_query = ((struct __pyx_obj_8ctctable_TCQuery *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line537")'> 537:     query._state = tctdbqrynew(tctdb)</pre>
<pre id='line537' class='code' style='background-color: #FFFFff'>
    __pyx_v_query->_state = tctdbqrynew(__pyx_v_tctdb);
</pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line538")'> 538:     return query</pre>
<pre id='line538' class='code' style='background-color: #FFFF8d'>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(((PyObject *)__pyx_r));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_query));
  __pyx_r = __pyx_v_query;
  goto __pyx_L0;

  __pyx_r = ((struct __pyx_obj_8ctctable_TCQuery *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("ctctable.make_query");
  __pyx_r = 0;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_query);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>((PyObject *)__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line539")'> 539: </pre>
<pre id='line539' class='code' style='background-color: #FFFFff'></pre></body></html>
